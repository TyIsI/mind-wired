{"version":3,"file":"mind-wired.0.1.11.js","mappings":"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","sources":["webpack://mindwired/webpack/universalModuleDefinition","webpack://mindwired/webpack/bootstrap","webpack://mindwired/webpack/runtime/define property getters","webpack://mindwired/webpack/runtime/global","webpack://mindwired/webpack/runtime/hasOwnProperty shorthand","webpack://mindwired/webpack/runtime/make namespace object","webpack://mindwired/webpack/runtime/publicPath","webpack://mindwired/./src/service/dom.js","webpack://mindwired/./src/service/clone.js","webpack://mindwired/./src/service/event-bus.js","webpack://mindwired/./src/service/dnd.js","webpack://mindwired/./src/components/dnd/viewport-dnd.js","webpack://mindwired/./src/service/geom.js","webpack://mindwired/./src/components/canvas-ui.js","webpack://mindwired/./src/components/edge/edge-style.js","webpack://mindwired/./src/components/edge/mustache-lr-renderer.js","webpack://mindwired/./src/components/edge/mustache-tb-renderer.js","webpack://mindwired/./src/components/edge-ui.js","webpack://mindwired/./src/components/edge/line-edge-renderer.js","webpack://mindwired/./src/components/edge/natural-curve-renderer.js","webpack://mindwired/./src/components/node-ui.js","webpack://mindwired/./src/components/layout/node/default-layout.js","webpack://mindwired/./src/components/layout/node/axis-x-layout.js","webpack://mindwired/./src/components/layout/node/axis-y-layout.js","webpack://mindwired/./src/components/layout/node/axis-xy-layout.js","webpack://mindwired/./src/components/layout/index.js","webpack://mindwired/./src/components/selection/node-selection-model.js","webpack://mindwired/./src/components/selection/index.js","webpack://mindwired/./src/components/editing/node-editing.js","webpack://mindwired/./src/components/node/renderer/plain-text-renderer.js","webpack://mindwired/./src/components/node/renderer/icon-badge-renderer.js","webpack://mindwired/./src/components/node/renderer/thumbnail-renderer.js","webpack://mindwired/./src/components/node/node-rendering-context.js","webpack://mindwired/./src/components/node/index.js","webpack://mindwired/./src/service/index.js","webpack://mindwired/./src/components/alignment/alignment-ui.js","webpack://mindwired/./src/components/datasource/tree-ds.js","webpack://mindwired/./src/components/direction.js","webpack://mindwired/./src/components/drag-context.js","webpack://mindwired/./src/components/mind-wired.js","webpack://mindwired/./src/components/dnd/change-parent-node.js","webpack://mindwired/./src/components/dnd/node-dnd.js","webpack://mindwired/./src/components/config.js","webpack://mindwired/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mindwired\"] = factory();\n\telse\n\t\troot[\"mindwired\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","/* eslint-disable max-classes-per-file */\nclass Attr {\n  constructor(attrExpression) {\n    this.expression = attrExpression;\n  }\n\n  get isClass() {\n    return this.expression.charAt(0) === \".\";\n  }\n\n  get isId() {\n    return this.expression.charAt(0) === \"#\";\n  }\n\n  get value() {\n    return this.expression.substring(1);\n  }\n\n  setAttribute(el) {\n    if (this.isId) {\n      el.setAttribute(\"id\", this.value);\n    } else if (this.isClass) {\n      el.classList.add(this.value);\n    } else {\n      throw new Error(`neither id nor class : [${this.expression}]`);\n    }\n  }\n}\nconst closest = (elem, selector) => {\n  if (elem.nodeType === 1) {\n    return elem.closest(selector);\n  }\n  if (elem.nodeType === 3) {\n    return elem.parentElement.closest(selector);\n  }\n  throw new Error(`node type ${elem.nodeTye}, tag(${elem.nodeName})`);\n};\n\nconst parseAttr = (expression) => {\n  const attr = expression || \"\";\n  return attr\n    .split(\" \")\n    .map((val) => val.trim())\n    .filter((val) => val.length > 0);\n};\nconst createEl = (tagName, attributes) => {\n  const tag = document.createElement(tagName);\n  attributes.forEach((value) => {\n    const attr = new Attr(value);\n    attr.setAttribute(tag);\n  });\n  return tag;\n};\nconst tag = {\n  span: (attr, content) => {\n    const span = createEl(\"span\", parseAttr(attr));\n    if (content) {\n      span.innerHTML = content;\n    }\n    return span;\n  },\n  iconButton: (attrs, content) => {\n    const button = createEl(\"BUTTON\", parseAttr(attrs));\n    button.innerHTML = content;\n    return button;\n  },\n  img: (imgUrl) => {\n    const img = document.createElement(\"img\");\n    return new Promise((resolve, reject) => {\n      img.onload = () => {\n        resolve({ img, width: img.naturalWidth, height: img.naturalHeight });\n      };\n      img.onerror = () => {\n        console.log(\"ERROR\");\n        reject(\"NOT_ALLOWED\");\n      };\n      img.crossOrigin = \"Anonymous\";\n      img.src = imgUrl;\n    });\n  },\n  div: (attr) => createEl(\"DIV\", parseAttr(attr)),\n  canvas: (attr) => createEl(\"CANVAS\", parseAttr(attr)),\n};\nconst attr = (el, attrName, attrValue, always) => {\n  const v = el.getAttribute(attrName);\n  if (always || !v) {\n    el.setAttribute(attrName, attrValue);\n  }\n};\nconst clazz = {\n  add: (el, className) => el.classList.add(className),\n  remove: (el, className) => el.classList.remove(className),\n};\nconst imageSize = (imgUrl) => {\n  const xhr = new XMLHttpRequest();\n  xhr.open(\"HEAD\", imgUrl, true);\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === xhr.DONE) {\n      console.log(xhr.getResponseHeader(\"Content-Length\"));\n    }\n  };\n  xhr.send();\n};\n\nconst fileToImage = (file) => {\n  const reader = new FileReader();\n  return new Promise((resolve) => {\n    reader.addEventListener(\"load\", () => {\n      const img = document.createElement(\"img\");\n      img.src = reader.result;\n      resolve({ file, img });\n    });\n    reader.readAsDataURL(file);\n  });\n};\n\nconst registerEvent = (target, eventName, callback, options) => {\n  const el = target || window;\n  el.addEventListener(eventName, callback, options || false);\n};\n\nconst registerKeyEvent = (target, eventName, callback, option) => {\n  target.addEventListener(eventName, (e) => {\n    const code = e.code.toLowerCase();\n    const { keys } = option;\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const { ctrlKey, shiftKey, altKey, metaKey } = e;\n      if (\n        key.code === \"*\" ||\n        (key.code === code &&\n          key.alt === altKey &&\n          key.meta === metaKey &&\n          key.shift === shiftKey &&\n          key.ctrl === ctrlKey)\n      ) {\n        callback(e);\n        break;\n      }\n    }\n  });\n};\n/**\n * 'enter'\n * 'space'\n * 'ctrl@enter'\n * 'alt+shift@space'\n * @param {string} keyFormat\n */\nconst parseKeyOption = (keyFormat) => {\n  let [metaKeys, code] = keyFormat.split(\"@\");\n  if (!code) {\n    // 'enter', 'space'\n    code = metaKeys;\n    metaKeys = \"\";\n  }\n  const metas = metaKeys.split(\"+\");\n  return {\n    ctrl: metas.includes(\"ctrl\"),\n    shift: metas.includes(\"shift\"),\n    alt: metas.includes(\"alt\"),\n    meta: metas.includes(\"meta\"),\n    code,\n  };\n};\nconst data = {\n  int: (el, attrList) => {\n    const d = {};\n    attrList.forEach((key) => {\n      const v = el.dataset[key];\n      d[key] = parseInt(v, 10);\n    });\n    return d;\n  },\n};\nconst stopPropagation = (e) => e.stopPropagation();\nconst event = {\n  createEventBus: () => new EventBus(),\n  consume: (target, eventName) => {\n    target.addEventListener(eventName, stopPropagation);\n  },\n  focus: (target, callback, options) =>\n    registerEvent(target, \"focus\", callback, options),\n  mousedown: (callback, target, options) => {\n    registerEvent(target, \"mousedown\", callback, options);\n  },\n  mousemove: (callback, target, options) => {\n    registerEvent(target, \"mousemove\", callback, options);\n  },\n  mouseup: (callback, target, options) => {\n    registerEvent(target, \"mouseup\", callback, options);\n  },\n  touchstart: (callback, target, options) => {\n    registerEvent(target, \"touchstart\", callback, options);\n  },\n  touchmove: (callback, target, options) => {\n    registerEvent(target, \"touchmove\", callback, options);\n  },\n  touchend: (callback, target, options) => {\n    registerEvent(target, \"touchend\", callback, options);\n  },\n  click: (target, callback, options) => {\n    registerEvent(target, \"click\", callback, options);\n  },\n  keydown: (target, callback, options) => {\n    options = options || \"*\";\n    const keys = options\n      .split(\" \")\n      .filter((key) => key.trim().length > 0)\n      .map((key) => parseKeyOption(key));\n    registerKeyEvent(target, \"keydown\", callback, { keys });\n  },\n  keyup: (target, callback, options) => {\n    options = options || \"*\";\n    const keys = options\n      .split(\" \")\n      .filter((key) => key.trim().length > 0)\n      .map((key) => parseKeyOption(key));\n    registerKeyEvent(target, \"keyup\", callback, {\n      keys,\n    });\n    // registerEvent(target, \"keyup\", callback, options);\n  },\n  resize: (target, callback) => {},\n};\nconst converters = {\n  width: (val) => {\n    const type = typeof val;\n    return type === \"number\" ? `${val}px` : val;\n  },\n};\n\"top,left,height,minWidth,minHeight\".split(\",\").forEach((prop) => {\n  converters[prop] = converters.width;\n});\n\nconst css = (el, styles) => {\n  Object.keys(styles).forEach((key) => {\n    const fn = converters[key] || ((val) => val);\n    const value = fn(styles[key]);\n    el.style[key] = value;\n  });\n};\nconst parseTemplate = (template, params) => {\n  let t = template;\n  Object.keys(params || {}).forEach((key) => {\n    const text = \"@\" + key;\n    const value = params[key];\n    t = t.replaceAll(text, value);\n  });\n  const virtualElem = document.createElement(\"template\");\n  virtualElem.innerHTML = t;\n  return virtualElem.content.firstElementChild;\n  // return virtualDiv.firstElementChild;\n};\nconst findOne = (el, cssSelector) => el.querySelector(cssSelector);\nconst is = (el, cssSelector, searchParent = true) => {\n  const found = el.matches(cssSelector);\n  if (found) {\n    return found;\n  }\n  if (searchParent) {\n    const elem = closest(el, cssSelector);\n    return !!elem;\n  } else {\n    return false;\n  }\n};\nconst domRect = (el) => el.getBoundingClientRect();\n\nconst types = {\n  method: (obj) => typeof obj === \"function\",\n};\nconst valid = {\n  path: (value) =>\n    new Promise((yes, no) => {\n      const v = value && value.trim();\n      if (v.length > 0) {\n        yes(v);\n      } else {\n        no(value);\n      }\n    }),\n  number: (value) =>\n    new Promise((yes, no) => {\n      const n = parseFloat(value);\n      if (Number.isNaN(n)) {\n        no(value);\n      } else {\n        yes(n);\n      }\n    }),\n  string: (value) => typeof value === \"string\" && value.trim().length > 0,\n};\nexport default {\n  tag,\n  attr,\n  clazz,\n  closest,\n  imageSize,\n  fileToImage,\n  event,\n  css,\n  parseTemplate,\n  findOne,\n  is,\n  data,\n  domRect,\n  types,\n  valid,\n};\n","const isPrimitive = (o) => {\n  const type = typeof o;\n  if (\"number,string,boolean,undefined\".includes(type)) return true;\n};\nconst isFunction = (o) => typeof o === \"function\";\nconst deepCopy = (src) => {\n  if (\n    src === undefined ||\n    src === null ||\n    isPrimitive(src) ||\n    isFunction(src)\n  ) {\n    return src;\n  }\n  const dst = Array.isArray(src) ? [] : {};\n  Object.keys(src).forEach((prop) => {\n    const value = deepCopy(src[prop]);\n    dst[prop] = value;\n  });\n  return dst;\n};\n/**\n * merge existing leaf value of src into target\n *\n *```javascript\n * src: {padding: {left: 8, right: 8}}\n * target: {color: '#aaa', padding: {top: 16} }\n *\n * merged: {color: '#aaa', padding: {top: 16, left:8, right: 8}}\n * ```\n * @param {object} src\n * @param {object} target\n */\nconst mergeLeaf = (src, target) => {\n  Object.keys(src).forEach((prop) => {\n    if (target[prop] === null || target[prop] === undefined) {\n      target[prop] = deepCopy(src[prop]);\n    } else if (isPrimitive(src[prop])) {\n      target[prop] = src[prop];\n    } else {\n      mergeLeaf(src[prop], target[prop]);\n    }\n  });\n  return target;\n};\nexport default {\n  deepCopy,\n  mergeLeaf,\n};\n","const EVENT = {\n  DRAG: {\n    VIEWPORT: { name: \"viewport dragged\", desc: \"\" },\n    NODE: { name: \"node dragged\", desc: \"\" },\n  },\n  SELECTION: {\n    NODE: {\n      name: \"node selected\",\n      desc: \"\",\n    },\n  },\n  EDIT: {\n    NODE: {\n      name: \"editing state of a node\",\n      desc: \"\",\n    },\n  },\n  NODE: {\n    CREATED: {\n      name: \"node.created\",\n      desc: \"\",\n      CLIENT: {\n        name: \"node.created.client\",\n        desc: \"client-side node creation event\",\n      },\n    },\n    DELETED: {\n      name: \"node.deleted\",\n      desc: \"node has been deleted\",\n      CLIENT: {\n        name: \"node.deleted.client\",\n        desc: \"client-side node deletion event\",\n      },\n    },\n    UPDATED: {\n      name: \"node.updated\",\n      desc: \"content of node updated\",\n      CLIENT: {\n        name: \"node.updated.client\",\n        desc: \"client-side node update event\",\n      },\n    },\n    SELECTED: {\n      name: \"node.selected\",\n      desc: \"one or more nodes selected\",\n      CLIENT: {\n        name: \"node.selected.client\",\n        desc: \"client-side node selection event\",\n      },\n    },\n    EDITING: {\n      name: \"node.editing\",\n      desc: \"node's editing state\",\n    },\n    FOLDED: {\n      name: \"node.folded\",\n      desc: \"node is folded or unfolded\",\n    },\n  },\n  VIEWPORT: {\n    RESIZED: {\n      name: \"viewport.resized\",\n      desc: \"viewport size chaged\",\n    },\n    CLICKED: {\n      name: \"viewport.clicked\",\n      desc: \"viewport has been clicked\",\n    },\n  },\n};\nconst parseEvent = (eventName) => {\n  const pathes = eventName.toUpperCase().split(\".\");\n  let obj = EVENT;\n  for (let i = 0; i < pathes.length; i++) {\n    obj = obj[pathes[i]];\n    if (!obj) {\n      throw new Error(`invalid event name: [${eventName}]`);\n    }\n  }\n  if (obj.name !== eventName) {\n    throw new Error(`event name mismatch: [${eventName}]`);\n  }\n  return obj;\n};\nconst EMPTY_SET = new Set();\nclass EventBus {\n  constructor() {\n    this.callbacks = new Map();\n  }\n\n  on(eventName, callback) {\n    let callbackList = this.callbacks.get(eventName);\n    if (!callbackList) {\n      callbackList = new Set();\n      this.callbacks.set(eventName, callbackList);\n    }\n    callbackList.add(callback);\n  }\n  off(eventObj, callback) {\n    const callbackList = this.callbacks.get(eventObj);\n    if (!callbackList) {\n      return;\n    }\n    const idx = callbackList.findIndex((cb) => cb === callback);\n    callbackList.splice(idx, 1);\n  }\n  /**\n   * used to register client-side callback\n   * @param {string} eventName like \"valid.event.path\" format\n   * @param {function} callback\n   */\n  listen(eventName, callback) {\n    const event = parseEvent(eventName);\n    this.on(event, callback);\n  }\n  emit(eventName, payload, emitForClient) {\n    const callbackList = this.callbacks.get(eventName) || EMPTY_SET;\n    callbackList.forEach((cb) => {\n      try {\n        cb(payload);\n      } catch (e) {\n        console.log(e);\n      }\n    });\n    if (emitForClient) {\n      setTimeout(() => {\n        this.emit(eventName[\"CLIENT\"], payload);\n      });\n    }\n  }\n}\n\nexport { EventBus, EVENT };\n","/**\n * dummy dnd handlers\n */\nconst beforeDrag = () => {};\nconst dragging = beforeDrag;\nconst afterDrag = beforeDrag;\n\nconst convToMouseEvent = (te) => {\n  let touch = te.touches[0];\n  if (te.type === \"touchend\") {\n    touch = te.changedTouches[0];\n  }\n  te.clientX = touch.clientX;\n  te.clientY = touch.clientY;\n  te.layerX = 0;\n  te.layerY = 0;\n  te.offsetX = 0;\n  te.offsetY = 0;\n  te.pageX = touch.pageX;\n  te.pageY = touch.pageY;\n  te.screenX = touch.screenX;\n  te.screenY = touch.screenY;\n};\nconst clearTouchTimer = (ctx) => {\n  clearTimeout(ctx.touchTimer);\n  ctx.touchTimer = null;\n};\nconst mousedown = (ctx, e) => {\n  const { handler } = ctx;\n  if (!handler.accept(e.target)) {\n    return;\n  }\n  ctx.dragging = {\n    originalEvent: e,\n    sx: e.pageX,\n    sy: e.pageY,\n    dx: 0,\n    dy: 0,\n    ghost: null,\n    once: null,\n  };\n  handler.beforeDrag(ctx.dragging);\n};\n\nconst mousemove = (ctx, e) => {\n  if (ctx.dragging) {\n    e.preventDefault();\n    if (ctx.dragging.once) {\n      ctx.dragging.once();\n      ctx.dragging.once = null;\n    }\n    ctx.originalEvent = e;\n    ctx.originalEvent = e;\n    ctx.dragging.dx = e.pageX - ctx.dragging.sx;\n    ctx.dragging.dy = e.pageY - ctx.dragging.sy;\n    ctx.handler.dragging(ctx.dragging);\n  }\n};\nconst mouseup = (ctx, e) => {\n  ctx.originalEvent = e;\n  document.querySelector(\"body\").style.cursor = \"\";\n  try {\n    // ghost.clear();\n    if (ctx.dragging) {\n      // console.log('[M-UP]', e.target)\n      ctx.handler.afterDrag(ctx.dragging);\n    }\n  } catch (e) {\n    console.log(\"[DND error]\", e);\n  } finally {\n    ctx.data.clear();\n    ctx.dragging = null;\n  }\n};\nconst touchstart = (ctx, e) => {\n  ctx.touchTimer = setTimeout(() => {\n    convToMouseEvent(e);\n    mousedown(ctx, e);\n  }, 10);\n};\nconst touchmove = (ctx, e) => {\n  clearTouchTimer(ctx);\n  convToMouseEvent(e);\n  mousemove(ctx, e);\n};\nconst touchend = (ctx, e) => {\n  clearTouchTimer(ctx);\n  convToMouseEvent(e);\n  mouseup(ctx, e);\n};\n\nconst install = (ctx) => {\n  const { handler } = ctx;\n  handler.beforeDrag = handler.beforeDrag || beforeDrag;\n  handler.dragging = handler.dragging || dragging;\n  handler.afterDrag = handler.afterDrag || afterDrag;\n\n  window.addEventListener(\"mousedown\", (e) => mousedown(ctx, e), false);\n  window.addEventListener(\"mousemove\", (e) => mousemove(ctx, e), {\n    passive: false,\n  });\n  window.addEventListener(\"mouseup\", (e) => mouseup(ctx, e), false);\n  window.addEventListener(\"touchstart\", (e) => touchstart(ctx, e), false);\n  window.addEventListener(\"touchmove\", (e) => touchmove(ctx, e), {\n    passive: false,\n  });\n  window.addEventListener(\"toucend\", (e) => touchend(ctx, e), false);\n};\nclass DndContext {\n  constructor(handler) {\n    this.touchTimer = null;\n    this.dragging = null;\n    this.handler = handler;\n    this.data = new Map();\n    install(this);\n  }\n  capture(name, value) {\n    this.data.set(name, value);\n  }\n  getData(name) {\n    return this.data.get(name);\n  }\n}\n\nexport { DndContext };\n","import { EVENT } from \"../../service/event-bus\";\n/**\n * handles viewport dragging\n */\n\nconst viewportDndHandler = (canvasUI) => ({\n  beforeDrag: (e) => {\n    canvasUI.dndContext.capture(\"offset\", canvasUI.config.getOffset());\n  },\n  dragging: (e) => {\n    const { dx, dy } = e;\n    canvasUI.dndContext.capture(\"dragged\", true);\n    const offset = canvasUI.dndContext.getData(\"offset\");\n    canvasUI.config.emit(EVENT.DRAG.VIEWPORT, {\n      state: \"DRAG\",\n      offset: {\n        x: offset.x + dx,\n        y: offset.y + dy,\n      },\n    });\n  },\n  afterDrag: (e) => {\n    // console.log(\"[DND AFTER]\", e);\n    const { dx, dy } = e;\n    // canvasUI.shiftBy(dx, dy);\n    const offset = canvasUI.dndContext.getData(\"offset\");\n    canvasUI.config.emit(EVENT.DRAG.VIEWPORT, {\n      state: \"DONE\",\n      offset: {\n        x: offset.x + dx,\n        y: offset.y + dy,\n      },\n    });\n    const dragged = canvasUI.dndContext.getData(\"dragged\");\n    if (!dragged) {\n      canvasUI.config.emit(EVENT.VIEWPORT.CLICKED);\n    }\n  },\n});\n\nexport default viewportDndHandler;\n","/**\n * move dst to dst'\n *\n *   |\n *   |             + dst'\n *   |\n *   |                + dst\n *   |  by deg\n *   +-------------------------->\n *  base\n *\n * @param {Point} base\n * @param {Point} dst\n * @param {number} degree - [0~360]\n */\nconst rotate = (base, dst, degree, { scale = 1 }) => {\n  const dx = (dst.x - base.x) * scale;\n  const dy = (dst.y - base.y) * scale;\n  const rad = (degree * Math.PI) / 180;\n  const cos = Math.cos(rad);\n  const sin = Math.sin(rad);\n\n  return {\n    x: dx * cos - dy * sin + base.x,\n    y: dx * sin + dy * cos + base.y,\n  };\n};\n\nexport default {\n  rotate,\n};\n","import { dom } from \"../service\";\nimport { DndContext } from \"../service/dnd\";\nimport viewportDndHandler from \"./dnd/viewport-dnd\";\nimport nodeDndHandler from \"./dnd/node-dnd\";\nimport changeParentDndHandler from \"./dnd/change-parent-node\";\nimport { EVENT } from \"../service/event-bus\";\nimport iconSetPara from \"../assets/icon-chng-parent.svg\";\nimport iconfolding from \"../assets/icon-folded.svg\";\nimport geom from \"../service/geom\";\n\nconst pixelRatio = window.devicePixelRatio;\nconst template = {\n  viewport: `<div data-mind-wired-viewport>\n    <canvas></canvas>\n    <div class=\"mwd-selection-area\"><div class=\"ctrl-icon\" data-cmd=\"set-para\" style=\"display:none; background-image: url(${iconSetPara});\"></div></div>\n    <div class=\"mwd-nodes\"></div>\n  </div>`,\n  node: `<div class=\"mwd-node\">\n    <div class=\"mwd-body\" tabIndex=\"0\"></div>\n    <div class=\"mwd-subs\"></div>\n    <div class=\"mwd-node-ctrl\"></div>\n  </div>`,\n  foldingControl: `<div class=\"ctrl-icon\" data-cmd=\"unfolding\" style=\"background-image: url(${iconfolding});\"></div>`,\n};\n\nclass NodeRect {\n  constructor(node, scale) {\n    const offset = node.offset();\n    offset.x *= scale;\n    offset.y *= scale;\n    const rect = dom.domRect(node.$bodyEl);\n    const { width, height } = rect;\n    this.top = offset.y - height / 2;\n    this.right = offset.x + width / 2;\n    this.bottom = offset.y + height / 2;\n    this.left = offset.x - width / 2;\n    this.width = width;\n    this.height = height;\n    this.cx = offset.x;\n    this.cy = offset.y;\n    this.icon = null;\n  }\n  merge(other) {\n    this.top = Math.min(this.top, other.top);\n    this.right = Math.max(this.right, other.right);\n    this.bottom = Math.max(this.bottom, other.bottom);\n    this.left = Math.min(this.left, other.left);\n    this.width = this.right - this.left;\n    this.height = this.bottom - this.top;\n    this.cx = this.width / 2;\n    this.cy = this.height / 2;\n    return this;\n  }\n  draw(canvas) {\n    const { selection } = canvas.config.ui;\n    const offset = canvas.getHolderOffset();\n\n    const el = dom.findOne(canvas.$viewport, \".mwd-selection-area\");\n    dom.css(el, {\n      left: offset.x + this.left - selection.padding,\n      top: offset.y + this.top - selection.padding,\n      width: this.width + 2 * selection.padding,\n      height: this.height + 2 * selection.padding,\n    });\n    const ctrl = dom.findOne(el, \"div\");\n    dom.css(ctrl, {\n      display: \"\",\n      width: 24 / Math.max(canvas.scale, 1),\n      height: 24 / Math.max(canvas.scale, 1),\n    });\n  }\n  clear(canvas) {\n    const el = dom.findOne(canvas.$viewport, \".mwd-selection-area\");\n    dom.css(el, { top: -1, left: -1, width: 0, height: 0 });\n    const ctrl = dom.findOne(el, \"div\");\n    dom.css(ctrl, { display: \"none\" });\n  }\n}\nconst installCanvasElem = (canvasUI) => {\n  const { el, ui } = canvasUI.config;\n  const width = ui.width || 600;\n  const height = ui.height || 600;\n  let viewport = dom.findOne(el, \"[data-mind-wired-viewport]\");\n  if (!viewport) {\n    viewport = dom.parseTemplate(template.viewport, {});\n    el.append(viewport);\n  }\n  dom.attr(viewport, \"tabIndex\", \"0\");\n  dom.css(viewport, { width, height });\n\n  return viewport;\n};\nconst captureContext2D = (canvasUI) => {\n  const { config, $viewport, $canvas } = canvasUI;\n  const { offsetWidth, offsetHeight } = $viewport;\n  dom.css($canvas, { width: offsetWidth, height: offsetHeight });\n  dom.attr($canvas, \"width\", pixelRatio * offsetWidth, true);\n  dom.attr($canvas, \"height\", pixelRatio * offsetHeight, true);\n  const ctx = $canvas.getContext(\"2d\", { alpha: false });\n\n  canvasUI.$ctx = ctx;\n  canvasUI.$ctx.scale(pixelRatio, pixelRatio);\n  config.emit(EVENT.VIEWPORT.RESIZED);\n};\nconst registerElement = (canvasUI, nodeUI) => {\n  if (nodeUI.$el) {\n    throw new Error(`[MINDWIRED][ERROR] already installed. (${nodeUI.uid})`);\n  }\n  const $el = (nodeUI.$el = dom.parseTemplate(template.node));\n  const renderingContext = canvasUI.config.getNodeRenderer();\n  const { model } = nodeUI;\n  const nodeRenderer = renderingContext.getRenderer(model.type);\n  nodeRenderer.install(nodeUI);\n\n  const placeHolder = canvasUI.elemOf(\".mwd-nodes\");\n  if (nodeUI.isRoot()) {\n    placeHolder.append($el);\n  } else {\n    const $subs = dom.findOne(nodeUI.parent.$el, \".mwd-subs\");\n    $subs.append($el);\n  }\n  // apply uuid for node instance\n  $el.dataset.uid = nodeUI.uid;\n  return nodeUI.$el;\n};\nconst unregisterElement = (canvasUI, nodeUI) => {\n  if (!nodeUI.$el) {\n    throw new Error(`[MINDWIRED][ERROR] not registered node. (${nodeUI.uid})`);\n  }\n  nodeUI.$el.remove();\n  delete nodeUI.$el;\n};\nconst installDnd = (canvasUI) => {\n  return new DndContext({\n    accept: (el) => {\n      const mwd = canvasUI.config.mindWired();\n      if (dom.closest(el, \"[data-editor-element]\")) {\n        return false;\n      }\n      if (dom.is(el, `[data-cmd=\"set-para\"]`)) {\n        canvasUI.dndContext.capture(\n          \"handler\",\n          changeParentDndHandler(canvasUI)\n        );\n        return true;\n      } else if (dom.closest(el, \"[data-cmd]\")) {\n        return false;\n      } else if (dom.is(el, \"canvas\")) {\n        canvasUI.dndContext.capture(\"handler\", viewportDndHandler(canvasUI));\n        return true;\n      } else if (dom.is(el, \".mwd-node\")) {\n        const nodeId = el.dataset.uid;\n        canvasUI.dndContext.capture(\"handler\", nodeDndHandler(canvasUI));\n        canvasUI.dndContext.capture(\"nodeId\", nodeId);\n        canvasUI.dndContext.capture(\"editing\", mwd.isEditing());\n        return true;\n      } else {\n        return false;\n      }\n    },\n    beforeDrag: (e) => {\n      const handler = canvasUI.dndContext.getData(\"handler\");\n      handler.beforeDrag(e);\n    },\n    dragging: (e) => {\n      const editing = canvasUI.dndContext.getData(\"editing\");\n      if (!editing) {\n        const handler = canvasUI.dndContext.getData(\"handler\");\n        handler.dragging(e);\n      }\n    },\n    afterDrag: (e) => {\n      const editing = canvasUI.dndContext.getData(\"editing\");\n      if (!editing) {\n        const handler = canvasUI.dndContext.getData(\"handler\");\n        handler.afterDrag(e);\n      }\n    },\n  });\n};\nconst updateFolding = (node, display) => {\n  dom.css(node.$el, { display });\n  if (node.isFolded()) {\n    return;\n  }\n  node.subs.forEach((child) => {\n    updateFolding(child, display);\n  });\n};\nconst installFocusHandler = (canvasUI) => {\n  /*\n  dom.event.focus(\n    canvasUI.$viewport,\n    (e) => {\n      if (dom.is(e.target, \"[data-editor-element]\", true)) {\n        // prevents focus to propaga to root elem\n        // it breaks editing process\n      } else if (dom.is(e.target, \".mwd-node\")) {\n        const uid = e.target.parentNode.dataset.uid;\n        const mwd = canvasUI.config.mindWired();\n        const node = mwd.findNode((node) => node.uid === uid);\n        canvasUI.config.emit(EVENT.NODE.SELECTED, { node });\n      }\n    },\n    true\n  );\n  */\n};\nclass CanvasUI {\n  constructor(config) {\n    this.config = config;\n    this.$viewport = installCanvasElem(this);\n    captureContext2D(this);\n    installFocusHandler(this);\n    this.dndContext = installDnd(this);\n    let timer = null;\n    const resizer = () => {\n      clearTimeout(timer);\n      timer = setTimeout(captureContext2D, 150, this);\n    };\n    this.resizeObserver = new ResizeObserver(resizer);\n    this.resizeObserver.observe(this.$viewport);\n    this.selectionArea = null;\n  }\n  get $canvas() {\n    return this.$viewport.querySelector(\"canvas\");\n  }\n  get $holder() {\n    return this.$viewport.querySelector(\".mwd-nodes\");\n  }\n  get scale() {\n    return this.config.scale;\n  }\n  getContext() {\n    return this.$ctx;\n  }\n  getHolderOffset() {\n    const el = this.$holder;\n    // const baseOffset = this.config.getOffset();\n    return { x: el.offsetLeft, y: el.offsetTop };\n  }\n  getDimension() {\n    const el = this.$canvas;\n    return { width: el.offsetWidth, height: el.offsetHeight };\n  }\n  elemOf(cssSelector) {\n    return this.$viewport.querySelector(cssSelector);\n  }\n  shiftBy(dx, dy) {\n    const offset = this.config.getOffset();\n    offset.x += dx;\n    offset.y += dy;\n    this.config.setOffset(offset);\n    this.repaintNodeHolder();\n  }\n  findNodeAt(x, y) {\n    const nodeBodies = this.$holder.querySelectorAll(\".mwd-body\");\n    let found = null;\n    for (let i = 0; i < nodeBodies.length; i++) {\n      const rect = dom.domRect(nodeBodies[i]);\n      if (\n        rect.left <= x &&\n        rect.right >= x &&\n        rect.top <= y &&\n        rect.bottom >= y\n      ) {\n        found = nodeBodies[i];\n        break;\n      }\n    }\n    if (!found) {\n      return null;\n    }\n    const mwd = this.config.mindWired();\n    const nodeEl = dom.closest(found, \".mwd-node\");\n    const node = mwd.findNode((node) => node.uid === nodeEl.dataset.uid);\n    return node;\n  }\n  drawPath(points, options) {\n    const ctx = this.getContext();\n    Object.keys(options || {}).forEach((key) => {\n      const val = options[key];\n      ctx[key] = val;\n    });\n    let s = points[0];\n    points = points.slice(1);\n\n    const offset = this.getHolderOffset();\n    ctx.beginPath();\n    ctx.moveTo(offset.x + s.x, offset.y + s.y);\n    points.forEach((e) => {\n      ctx.lineTo(offset.x + e.x, offset.y + e.y);\n    });\n    ctx.stroke();\n  }\n  drawCurve(s, e, option) {\n    const lenSE = Math.sqrt(\n      (s.x - e.x) * (s.x - e.x) + (s.y - e.y) * (s.y - e.y)\n    );\n    const degree = option.degree;\n    const length = lenSE * option.ratio;\n    const scale = length / lenSE;\n    const cp1 = geom.rotate(s, e, degree, { scale });\n    const cp2 = geom.rotate(e, s, degree, { scale });\n    const offset = this.getHolderOffset();\n    const ctx = this.getContext();\n    Object.keys(option.props || {}).forEach((key) => {\n      const val = option.props[key];\n      ctx[key] = val;\n    });\n    ctx.beginPath();\n    ctx.moveTo(offset.x + s.x, offset.y + s.y);\n    ctx.bezierCurveTo(\n      offset.x + cp1.x,\n      offset.y + cp1.y,\n      offset.x + cp2.x,\n      offset.y + cp2.y,\n      offset.x + e.x,\n      offset.y + e.y\n    );\n    ctx.stroke();\n  }\n  drawBeizeCurve(s, e, option) {\n    const ctx = this.getContext();\n    Object.keys(option.props || {}).forEach((key) => {\n      const val = option.props[key];\n      ctx[key] = val;\n    });\n    const [cp1, cp2] = option.cpoints;\n    const offset = this.getHolderOffset();\n    ctx.beginPath();\n    ctx.moveTo(offset.x + s.x, offset.y + s.y);\n    ctx.bezierCurveTo(\n      offset.x + cp1.x,\n      offset.y + cp1.y,\n      offset.x + cp2.x,\n      offset.y + cp2.y,\n      offset.x + e.x,\n      offset.y + e.y\n    );\n    ctx.stroke();\n  }\n  drawVLines(xPoints, option) {\n    const H = this.$viewport.offsetHeight;\n    const ctx = this.getContext();\n    ctx.save();\n    if (typeof option === \"function\") {\n      option(ctx);\n    }\n    ctx.beginPath();\n    const offset = this.getHolderOffset();\n    xPoints.forEach((x) => {\n      ctx.moveTo(offset.x + x, 0);\n      ctx.lineTo(offset.x + x, H);\n    });\n    ctx.stroke();\n    ctx.closePath();\n    ctx.restore();\n  }\n  drawHLines(yPoints, option) {\n    const W = this.$viewport.offsetWidth;\n    const ctx = this.getContext();\n    ctx.save();\n    if (typeof option === \"function\") {\n      option(ctx);\n    }\n    ctx.beginPath();\n    const offset = this.getHolderOffset();\n    yPoints.forEach((y) => {\n      ctx.moveTo(0, offset.y + y);\n      ctx.lineTo(W, offset.y + y);\n    });\n    ctx.stroke();\n    ctx.closePath();\n    ctx.restore();\n  }\n  clear() {\n    const dim = this.getDimension();\n    const ctx = this.getContext();\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, dim.width, dim.height);\n\n    // drawGrid(ctx, dim);\n  }\n\n  repaintNodeHolder() {\n    const baseOffset = this.config.getOffset();\n    const { scale } = this.config;\n    dom.css(this.$holder, {\n      top: `calc(50% + ${baseOffset.y}px)`,\n      left: `calc(50% + ${baseOffset.x}px)`,\n      transform: `scale(${scale})`,\n    });\n    if (this.selectionArea) {\n      this.selectionArea.draw(this);\n    }\n  }\n  moveNode(nodeUI) {\n    // moveNode\n    const { parent } = nodeUI;\n    const $subs = dom.findOne(parent.$el, \".mwd-subs\");\n    $subs.append(nodeUI.$el);\n  }\n  drawSelection(nodes) {\n    if (!nodes || nodes.length === 0) {\n      return;\n    }\n    this.hideSelection();\n    const rects = nodes.map((n) => new NodeRect(n, this.scale));\n    this.selectionArea = rects.reduce((acc, rect) => acc.merge(rect), rects[0]);\n    this.selectionArea.draw(this);\n  }\n  hideSelection() {\n    if (this.selectionArea) {\n      this.selectionArea.clear(this);\n      this.selectionArea = null;\n    }\n  }\n  drawNode(nodeUI) {\n    if (!nodeUI.$el) {\n      registerElement(this, nodeUI);\n    }\n    const { uid } = nodeUI;\n    const nodeEl = dom.findOne(this.$holder, `[data-uid=\"${uid}\"]`);\n    const renderingContext = this.config.getNodeRenderer();\n\n    const { model } = nodeUI;\n    const type = model.type || \"text\";\n    const nodeRenderer = renderingContext.getRenderer(type);\n    nodeRenderer.render(nodeUI);\n  }\n  showNodeEditor(nodeUI, $editorEl) {\n    const { uid } = nodeUI;\n    const nodeEl = this.$holder.querySelector(`[data-uid=${uid}]`);\n    nodeEl.append($editorEl);\n    // mark editor element for focus management\n    // see installFocusHandler();\n    $editorEl.dataset.editorElement = \"\";\n    return new Promise((ok) => {\n      setTimeout(ok);\n    });\n  }\n  hideNodeEditor(nodeUI) {\n    const { uid } = nodeUI;\n    const nodeEl = this.$holder.querySelector(`[data-uid=${uid}]`);\n    const editBox = dom.findOne(nodeEl, \"[data-editor-element]\");\n    if (editBox) {\n      editBox.remove();\n    }\n    dom.findOne(nodeEl, \".mwd-body\").focus();\n  }\n  regsiterNode(nodeUI) {\n    registerElement(this, nodeUI);\n    // nodeUI.repaint();\n  }\n  unregisterNode(nodeUI) {\n    unregisterElement(this, nodeUI);\n    this.hideSelection();\n  }\n  updateFoldingNodes(nodeUI) {\n    const display = nodeUI.isFolded() ? \"none\" : \"\";\n    nodeUI.subs.forEach((childNode) => {\n      updateFolding(childNode, display);\n    });\n    const nodeEl = dom.findOne(this.$holder, `[data-uid=\"${nodeUI.uid}\"]`);\n    if (nodeUI.isFolded()) {\n      const rect = dom.domRect(nodeUI.$bodyEl);\n      const foldingEl = dom.parseTemplate(template.foldingControl, {});\n      dom.css(foldingEl, {\n        width: 20,\n        height: 20,\n        transform: `translate(${rect.width / 2}px, -50%)`,\n        zIndex: 0,\n      });\n      nodeEl.append(foldingEl);\n      dom.event.click(foldingEl, (e) => {\n        e.stopPropagation();\n        nodeUI.setFolding(false);\n      });\n    } else {\n      dom.findOne(nodeEl, ':scope > [data-cmd=\"unfolding\"]').remove();\n    }\n  }\n  getNodeBody(nodeUI) {\n    let nodeEl = nodeUI.$el;\n    // let bodyEl = this.$holder.querySelector(`[data-uid=${nodeUI.uid}] .mwd-body`);\n    if (!nodeEl) {\n      nodeEl = registerElement(this, nodeUI);\n    }\n    return nodeEl.querySelector(`.mwd-body`);\n  }\n}\nexport default CanvasUI;\n","/**\n * edge style calculator\n *\n * supported style\n * - name:string\n * - option:object(edge dependant)\n * - color:string(name of color, #aaccss, etc)\n * - width:number(line width)\n */\nconst DEFAULT_EDGE_STYLE = {\n  name: \"line\",\n  option: {},\n  color: \"#000000\",\n  width: 1,\n};\nconst findProp = (node, prop) => {\n  let nodeRef = node;\n  let style = nodeRef.getStyle(\"edge\");\n  while (!style[prop] && !nodeRef.isRoot()) {\n    nodeRef = nodeRef.parent;\n    style = nodeRef.getStyle(\"edge\");\n  }\n  return style[prop] || DEFAULT_EDGE_STYLE[prop];\n};\nclass EdgeStyle {\n  constructor(nodeUI) {\n    this.nodeUI = nodeUI;\n  }\n  get name() {\n    return findProp(this.nodeUI, \"name\");\n  }\n  get option() {\n    return findProp(this.nodeUI, \"option\");\n  }\n  get color() {\n    return findProp(this.nodeUI, \"color\");\n  }\n  get width() {\n    return findProp(this.nodeUI, \"width\");\n  }\n}\n\nexport default EdgeStyle;\n","import { dom } from \"../../service\";\n\nconst widthOf = (node) => {\n  const { width } = node.$style;\n  return typeof width === \"function\" ? width(node) : width;\n};\nconst valignOf = (node) => {\n  const { option } = node.$style;\n  const valign = option && option.valign;\n  return valign || \"center\";\n};\nconst renderUnderline = (canvas, node, rect, padding) => {\n  const width = widthOf(node);\n  // const { scale } = canvas;\n  canvas.drawPath(\n    [\n      { x: rect.left - padding.hor, y: rect.bottom + padding.ver },\n      { x: rect.right + padding.hor, y: rect.bottom + padding.ver },\n    ],\n    { lineWidth: width, strokeStyle: node.$style.color }\n  );\n};\nconst renderCurve = (canvas, srcNode, s, dstNode, e, dx) => {\n  // const { scale } = canvas;\n  const srcWidth = widthOf(srcNode);\n  const dstWidth = widthOf(dstNode);\n  const width = Math.min(srcWidth, dstWidth);\n  const offset = Math.abs(srcWidth - dstWidth);\n  s.y -= offset / 2;\n  const props = { lineWidth: width, strokeStyle: dstNode.$style.color };\n  canvas.drawBeizeCurve(s, e, {\n    cpoints: [\n      { x: s.x + dx / 2, y: s.y },\n      { x: e.x - dx / 2, y: e.y },\n    ],\n    props,\n  });\n  if (offset > 0) {\n    s.y += offset;\n    canvas.drawBeizeCurve(s, e, {\n      cpoints: [\n        { x: s.x + dx / 2, y: s.y },\n        { x: e.x - dx / 2, y: e.y },\n      ],\n      props,\n    });\n  }\n};\nconst renderByMustache = (canvas, srcNode, dstNode) => {\n  const { scale } = canvas;\n  const [s, e] = [srcNode, dstNode].map((node) => {\n    const offset = node.offset(); // pure logical value\n    offset.x *= scale;\n    offset.y *= scale;\n    const rect = dom.domRect(node.$bodyEl);\n    const { width, height } = rect; // with scale applied\n    offset.left = offset.x - width / 2;\n    offset.right = offset.x + width / 2;\n    offset.top = offset.y - height / 2;\n    offset.bottom = offset.y + height / 2;\n    offset.width = width;\n    offset.height = height;\n    return offset;\n  });\n  const padding = { hor: 0, ver: 0 };\n\n  if (valignOf(srcNode) === \"bottom\") {\n    padding.ver = 5;\n  }\n\n  let min, max;\n  if (s.x <= e.x) {\n    min = s;\n    max = e;\n  } else {\n    min = e;\n    max = s;\n  }\n\n  min.x = min.right + padding.hor;\n  max.x = max.left - padding.hor;\n  if (padding.ver > 0) {\n    min.y = min.bottom + padding.ver;\n    max.y = max.bottom + padding.ver;\n  }\n  const dx = max.x - min.x;\n  const dy = max.y - min.y;\n  const w = widthOf(srcNode);\n  if (padding.ver > 0 && srcNode.isRoot() && srcNode.firstChild() === dstNode) {\n    renderUnderline(canvas, srcNode, s, padding);\n  }\n  renderCurve(canvas, srcNode, s, dstNode, e, s === min ? dx : -dx);\n  if (padding.ver > 0) {\n    renderUnderline(canvas, dstNode, e, padding);\n  }\n  // renderUnderline(canvas, dstNode, e, padding);\n  // if (dstNode.isLeaf() && padding.ver > 0) {\n  // }\n};\n\nexport default renderByMustache;\n","import { dom } from \"../../service\";\n\nconst widthOf = (node) => {\n  const { width } = node.$style;\n  return typeof width === \"function\" ? width(node) : width;\n};\nconst valignOf = (node) => {\n  const { option } = node.$style;\n  const valign = option && option.valign;\n  return valign || \"center\";\n};\nconst renderCurve = (canvas, srcNode, s, dstNode, e, dy) => {\n  const { scale } = canvas;\n  const srcWidth = widthOf(srcNode);\n  const dstWidth = widthOf(dstNode);\n  const width = Math.min(srcWidth, dstWidth);\n  const offset = Math.abs(srcWidth - dstWidth);\n  s.x -= offset / 2;\n  const props = { lineWidth: width * scale, strokeStyle: dstNode.$style.color };\n  canvas.drawBeizeCurve(s, e, {\n    cpoints: [\n      { x: s.x, y: s.y + dy / 2 },\n      { x: e.x, y: e.y - dy / 2 },\n    ],\n    props,\n  });\n  if (offset > 0) {\n    s.y += offset;\n    canvas.drawBeizeCurve(s, e, {\n      cpoints: [\n        { x: s.x, y: s.y + dy / 2 },\n        { x: e.x, y: e.y - dy / 2 },\n      ],\n      props,\n    });\n  }\n};\nconst renderByMustache = (canvas, srcNode, dstNode) => {\n  const { scale } = canvas;\n  const [s, e] = [srcNode, dstNode].map((node) => {\n    const offset = node.offset(scale);\n    const rect = dom.domRect(node.$bodyEl);\n    const { width, height } = rect;\n    offset.left = offset.x - width / 2;\n    offset.right = offset.x + width / 2;\n    offset.top = offset.y - height / 2;\n    offset.bottom = offset.y + height / 2;\n    offset.width = width;\n    offset.height = height;\n    return offset;\n  });\n  const padding = { hor: 0, ver: 5 };\n\n  let min, max;\n  if (s.y <= e.y) {\n    min = s;\n    max = e;\n  } else {\n    min = e;\n    max = s;\n  }\n\n  min.y = min.bottom + padding.ver;\n  max.y = max.top - padding.ver;\n\n  // const dx = max.x - min.x;\n  const dy = max.y - min.y;\n  // const w = widthOf(srcNode);\n  renderCurve(canvas, srcNode, s, dstNode, e, s === min ? dy : -dy);\n};\n\nexport default renderByMustache;\n","import { EVENT } from \"../service/event-bus\";\nimport EdgeStyle from \"./edge/edge-style\";\nimport line_edge from \"./edge/line-edge-renderer\";\nimport curve_edge from \"./edge/natural-curve-renderer\";\nimport mustache_edge_lr from \"./edge/mustache-lr-renderer\";\nimport mustache_edge_tb from \"./edge/mustache-tb-renderer\";\n\nconst rendering = {\n  LINE: line_edge,\n  NATURAL_CURVE: curve_edge,\n  MUSTACHE_LR: mustache_edge_lr,\n  MUSTACHE_TB: mustache_edge_tb,\n};\nconst createEdges = (srcNode, edges) => {\n  srcNode.children((child) => {\n    const e = new Edge(srcNode, child);\n    edges.push(e);\n    createEdges(child, edges);\n  });\n};\nconst filterIndex = (edges, callback) => {\n  const pos = [];\n  edges.forEach((e, index) => {\n    if (callback(e)) {\n      pos.push(index);\n    }\n  });\n  return pos;\n};\nconst updateHiddenState = (edgeUI, edge, folded) => {\n  const childEdges = edgeUI.filterEdges(\n    (e) => e.src === edge.dst && !e.src.isFolded()\n  );\n  childEdges.forEach((edge) => {\n    edge.hidden = folded;\n    updateHiddenState(edgeUI, edge, folded);\n  });\n};\nclass Edge {\n  constructor(srcNode, dstNode) {\n    this.srcNode = srcNode;\n    this.dstNode = dstNode;\n    this.hidden = false;\n  }\n  get src() {\n    return this.srcNode;\n  }\n  get dst() {\n    return this.dstNode;\n  }\n  matched(node) {\n    return this.srcNode === node || this.dstNode === node;\n  }\n  matchedDst(node) {\n    return this.dstNode === node;\n  }\n}\nclass EdgeUI {\n  constructor(config, rootNode, canvas) {\n    this.config = config;\n    this.canvas = canvas;\n    this.edges = [];\n    createEdges(rootNode, this.edges);\n    this.config\n      .listen(EVENT.NODE.CREATED, ({ nodes }) => {\n        nodes.forEach((nodeUI) => {\n          const e = new Edge(nodeUI.parent, nodeUI);\n          this.edges.push(e);\n        });\n        this.repaint();\n      })\n      .listen(EVENT.VIEWPORT.RESIZED, () => {\n        this.repaint();\n      })\n      .listen(EVENT.NODE.DELETED, (node) => {\n        const pos = filterIndex(this.edges, (e) => e.matched(node));\n        if (pos.length === 0) {\n          // MEMO invalid state: the deleted node does not exist.\n        } else {\n          pos.reverse().forEach((index) => this.edges.splice(index, 1));\n          // this.edges.splice(pos, 1);\n          this.repaint();\n        }\n      })\n      .listen(EVENT.NODE.MOVED, ({ node, prevParent }) => {\n        const pos = filterIndex(\n          this.edges,\n          (e) => e.src === prevParent && e.dst === node\n        );\n        if (pos.length > 0) {\n          pos.reverse().forEach((index) => this.edges.splice(index, 1));\n        }\n        const e = new Edge(node.parent, node);\n        this.edges.push(e);\n        this.repaint();\n      })\n      .listen(EVENT.NODE.FOLDED, ({ node }) => {\n        const edges = this.edges.filter((edge) => edge.src === node);\n        const folded = node.isFolded();\n        edges.forEach((edge) => {\n          edge.hidden = folded;\n          updateHiddenState(this, edge, folded);\n        });\n\n        this.repaint();\n      });\n  }\n  filterEdges(predicate) {\n    return this.edges.filter(predicate);\n  }\n  repaint(clearCanvas = true) {\n    if (clearCanvas) {\n      this.canvas.clear();\n    }\n    this.edges.forEach((e) => {\n      const { src, dst } = e;\n      const style = dst.$cachedStyle || new EdgeStyle(dst);\n      dst.$cachedStyle = style;\n      if (!e.hidden) {\n        rendering[style.name.toUpperCase()](this.canvas, src, dst);\n      }\n    });\n  }\n}\n\nexport default EdgeUI;\n","import { dom } from \"../../service\";\n/**\n * @param {CanvasUI} canvas\n * @param {NodeUI} srcNode\n * @param {NodeUI} dstNode\n */\nconst renderByLine = (canvas, srcNode, dstNode) => {\n  const { scale } = canvas;\n  const [s, e] = [srcNode, dstNode].map((node) => {\n    const offset = node.offset(); // pure logical value\n    offset.x *= scale;\n    offset.y *= scale;\n    const rect = dom.domRect(node.$bodyEl);\n    const { width, height } = rect; // with scale applied\n    offset.left = offset.x - width / 2;\n    offset.right = offset.x + width / 2;\n    offset.top = offset.y - height / 2;\n    offset.bottom = offset.y + height / 2;\n    offset.width = width;\n    offset.height = height;\n    return offset;\n  });\n  const style = dstNode.$style;\n  canvas.drawPath([s, e], {\n    lineWidth: style.width * scale,\n    strokeStyle: style.color,\n  });\n};\n\nexport default renderByLine;\n","/**\n * natural curve\n */\n/**\n * @param {CanvasUI} canvas\n * @param {NodeUI} srcNode\n * @param {NodeUI} dstNode\n */\nconst renderByCurve = (canvas, srcNode, dstNode) => {\n  const { scale } = canvas;\n  const [s, e] = [srcNode, dstNode].map((node) => node.offset(scale));\n  const style = srcNode.$style;\n  canvas.drawCurve(s, e, {\n    degree: style.option.deg || 20,\n    ratio: style.option.ratio || 0.4,\n    props: {\n      lineWidth: style.width * scale,\n      strokeStyle: style.color,\n    },\n  });\n};\n\nexport default renderByCurve;\n","import { dom } from \"../service\";\nimport { EVENT } from \"../service/event-bus\";\nimport EdgeStyle from \"./edge/edge-style\";\n\nconst parseSubs = (nodeUi) => {\n  const { subs } = nodeUi.config;\n  if (!subs || subs.length === 0) {\n    return [];\n  }\n  return subs.map((elem) => {\n    const node = new NodeUI(elem, nodeUi.sharedConfig);\n    node.parent = nodeUi;\n    return node;\n  });\n};\nlet uid = 100;\nlet zIndex = 1;\nclass NodeUI {\n  constructor(config, sharedConfig, parentNode) {\n    this.config = config;\n    this.sharedConfig = sharedConfig;\n    this.$el = null;\n    this.selected = false;\n    this.editing = false;\n    this.uid = `uuid-${uid++}`;\n    this.zIndex = 0;\n    this.subs = parseSubs(this);\n    this.parent = parentNode;\n    this.$style = new EdgeStyle(this);\n    this.folding = false;\n    this.$dim = null;\n  }\n  get model() {\n    return { ...this.config.model };\n  }\n  get $bodyEl() {\n    const canvas = this.sharedConfig.getCanvas();\n    return canvas.getNodeBody(this);\n  }\n  get x() {\n    return this.config.view.x;\n  }\n  get y() {\n    return this.config.view.y;\n  }\n  get layout() {\n    let { layout } = this.config.view;\n    if (layout) {\n      return { ...layout };\n    } else return this.parent && this.parent.layout;\n  }\n  get active() {\n    return !!this.$el;\n  }\n  get childNodes() {\n    return [...this.subs];\n  }\n  dimension() {\n    const scale = this.sharedConfig.scale;\n    const el = this.$bodyEl;\n    const offset = this.offset();\n    offset.x *= scale;\n    offset.y *= scale;\n    const w = (el.offsetWidth * scale) / 2;\n    const h = (el.offsetHeight * scale) / 2;\n    return (this.$dim = {\n      x: offset.x - w,\n      y: offset.y - h,\n      width: 2 * w,\n      height: 2 * h,\n      cx: offset.x,\n      cy: offset.y,\n      r: offset.x + w,\n      b: offset.y + h,\n    });\n  }\n  level() {\n    return this.isRoot() ? 0 : this.parent.level() + 1;\n  }\n  getStyle(type) {\n    // type: 'edge', 'node'\n    return Object.assign({}, this.config.view[type]);\n  }\n  isSelected() {\n    return this.selected;\n  }\n  setSelected(selected) {\n    this.selected = selected;\n    this.zIndex = ++zIndex;\n    if (this.active) {\n      this.repaint();\n    }\n  }\n  isDescendantOf(dstNode) {\n    let ref = this;\n    while (ref) {\n      if (ref === dstNode) {\n        return true;\n      } else {\n        ref = ref.parent;\n      }\n    }\n    return false;\n  }\n  updateModel(callback) {\n    const { model } = this.config;\n    if (callback(model)) {\n      this.$dim = null;\n      // this.repaint();\n      this.sharedConfig.emit(EVENT.NODE.UPDATED, [this]);\n    }\n  }\n  offset() {\n    let ref = this;\n    const p = { x: 0, y: 0 };\n    while (ref) {\n      const dir = 1; // ref.isRoot() ? -1 : 1;\n      p.x += dir * ref.x;\n      p.y += dir * ref.y;\n      ref = ref.parent;\n    }\n    return p;\n  }\n  setOffset({ x, y }) {\n    if (this.isRoot()) {\n      return;\n    }\n    const poff = this.parent.offset();\n    this.setPos(x - poff.x, y - poff.y);\n  }\n  /**\n   * relative pos from the direct parent\n   * @returns (x, y) from the direct parent\n   */\n  getPos() {\n    return { x: this.x, y: this.y };\n  }\n  setPos(x, y, update = true) {\n    this.config.view.x = x;\n    this.config.view.y = y;\n    if (update) {\n      this.repaint();\n    }\n  }\n  isEditingState() {\n    return this.editing;\n  }\n  setEditingState(editing) {\n    this.editing = editing;\n    this.repaint();\n  }\n  isRoot() {\n    return this.config.root;\n  }\n  isLeaf() {\n    return this.subs.length === 0;\n  }\n  children(callback) {\n    this.subs.forEach((child) => callback(child, this));\n  }\n  find(predicate) {\n    let found = predicate(this);\n    if (found) {\n      return this;\n    }\n    for (let i = 0; i < this.subs.length; i++) {\n      found = this.subs[i].find(predicate);\n      if (found) {\n        break;\n      }\n    }\n    return found;\n  }\n  /**\n   *\n   * @param {NodeUI} childUI\n   * @returns prev parentUI\n   */\n  addChild(childUI) {\n    const prevParent = childUI.parent;\n    if (prevParent && prevParent !== this) {\n      prevParent.removeChild(childUI);\n    }\n    childUI.parent = this;\n    this.subs.push(childUI);\n    const canvasUI = this.sharedConfig.getCanvas();\n    canvasUI.moveNode(childUI);\n    return prevParent;\n  }\n  removeChild(childUI) {\n    if (childUI.parent !== this) {\n      // not a child node\n      return null;\n    }\n    const pos = this.subs.findIndex((node) => node.uid === childUI.uid);\n    if (pos === -1) {\n      // not a child node\n      return null;\n    }\n    const deletedNodes = this.subs.splice(pos, 1);\n    deletedNodes.forEach((node) => (node.parent = null)); // clear ref to parent(this)\n    return deletedNodes[0];\n  }\n  firstChild() {\n    return this.subs[0];\n  }\n  lastChild() {\n    if (this.subs.length === 0) {\n      return null;\n    }\n    return this.subs[this.subs.length - 1];\n  }\n  setFolding(folding) {\n    if (this.folding === folding) {\n      return;\n    }\n    this.folding = folding;\n    this.repaint();\n    this.sharedConfig.emit(EVENT.NODE.FOLDED, {\n      node: this,\n      folded: this.folding,\n    });\n  }\n  isFolded() {\n    return this.folding;\n  }\n  repaint() {\n    const canvasUI = this.sharedConfig.getCanvas();\n    canvasUI.drawNode(this);\n    const { $el } = this;\n    const body = $el.querySelector(\".mwd-body\");\n\n    const pos = this.getPos();\n    dom.css($el, { top: pos.y, left: pos.x, zIndex: this.zIndex });\n\n    const methodName = this.isSelected() ? \"add\" : \"remove\";\n    const className = this.sharedConfig.activeClassName(\"node\");\n    dom.clazz[methodName](body, className);\n\n    const levelClassName = this.sharedConfig.nodeLevelClassName(this);\n    dom.clazz.add(body, levelClassName);\n  }\n}\n\nNodeUI.build = (elem, config) => {\n  elem.root = true;\n  return new NodeUI(elem, config);\n};\nexport default NodeUI;\n","/**\n * Default layout manager\n * It does nothing, keeping all nodes in their position.\n */\n\nconst doLayout = (nodeUI) => {};\nconst setPosition = () => {};\nexport default { doLayout, setPosition };\n","/**\n * reflective layout manager relative to parent\n *\n */\nconst reverseXPos = (node, context) => {\n  const { x, y } = node;\n  node.setPos(-x, y);\n  const manager = context.layoutManager.getLayoutManager(node.layout);\n  manager.doLayout(node, context);\n};\nconst doLayout = (nodeUI, context) => {\n  const { dir } = context;\n  if (!dir) {\n    return;\n  }\n  if (dir.updated(\"LR\") || dir.updated(\"RL\")) {\n    nodeUI.children((childUI) => {\n      reverseXPos(childUI, context);\n    });\n  }\n};\nconst setPosition = (nodeUI, context) => {\n  const { baseNode, rect } = context;\n  const x = baseNode.x;\n  const y = baseNode.y + rect.height + 10;\n  nodeUI.setPos(x, y);\n};\nexport default { doLayout, setPosition };\n","/**\n * reflective layout manager relative to parent\n *\n */\nconst reverseYPos = (node, context) => {\n  const { x, y } = node;\n  node.setPos(x, -y);\n  const manager = context.layoutManager.getLayoutManager(node.layout);\n  manager.doLayout(node, context);\n};\nconst doLayout = (nodeUI, context) => {\n  const { dir } = context;\n  if (!dir) {\n    return;\n  }\n  if (dir.updated(\"TB\") || dir.updated(\"BT\")) {\n    nodeUI.children((childUI) => {\n      reverseYPos(childUI, context);\n    });\n  }\n};\nconst setPosition = (nodeUI, context) => {\n  const { baseNode, rect } = context;\n  const x = baseNode.x + rect.width + 10;\n  const y = baseNode.y;\n  nodeUI.setPos(x, y);\n};\nexport default { doLayout, setPosition };\n","import xLayout from \"./axis-x-layout\";\nimport yLayout from \"./axis-y-layout\";\n\nconst doLayout = (nodeUI, context) => {\n  const { dir } = context;\n  if (!dir) {\n    return;\n  }\n  xLayout.doLayout(nodeUI, context);\n  yLayout.doLayout(nodeUI, context);\n};\nconst setPosition = (nodeUI, context) => {\n  xLayout.setPosition(nodeUI, context);\n};\nexport default {\n  doLayout,\n  setPosition,\n};\n","/**\n * list of layout managers to assign the positions\n */\nimport defaultLayout from \"./node/default-layout\";\nimport xAxisLayout from \"./node/axis-x-layout\";\nimport yAxisLayout from \"./node/axis-y-layout\";\nimport xyAxisLayout from \"./node/axis-xy-layout\";\n\nconst layoutMap = new Map();\nlayoutMap.set(\"DEFAULT\", defaultLayout);\nlayoutMap.set(\"X-AXIS\", xAxisLayout);\nlayoutMap.set(\"Y-AXIS\", yAxisLayout);\nlayoutMap.set(\"XY-AXIS\", xyAxisLayout);\n\nconst getLayoutManager = (layout) => {\n  let fn = layout ? layoutMap.get(layout.type) : defaultLayout;\n  return fn;\n};\nconst setPosition = (nodeUI, context) => {\n  const { layout } = nodeUI;\n  const manager = getLayoutManager(layout);\n  manager.setPosition(nodeUI, context);\n};\nconst layout = (nodeUI, context) => {\n  const { layout } = nodeUI;\n  const manager = getLayoutManager(layout);\n  manager.doLayout(nodeUI, context);\n};\nexport default {\n  getLayoutManager,\n  setPosition,\n  layout,\n};\n","/**\n *\n */\nimport { dom } from \"../../service\";\nimport { EVENT } from \"../../service/event-bus\";\nconst clearSelection = (nodeMap) => {\n  for (let nodeUI of nodeMap.values()) {\n    nodeUI.setSelected(false);\n  }\n  nodeMap.clear();\n};\nconst skipStateForInsert = (nodes) => {\n  if (nodes.length !== 1) {\n    return true;\n  }\n  if (nodes[0].isEditingState()) {\n    return true;\n  }\n  return false;\n};\nconst skipStateForDelete = (nodes) => {\n  if (nodes.length === 0) {\n    return true;\n  }\n  // root node cannot be deleted\n  const rootNode = nodes.find((node) => node.root);\n  return !!rootNode;\n};\nconst appendNode = (selectionModel, parent, sibling) => {\n  const mwd = selectionModel.config.mindWired();\n  mwd.addNode(parent, {\n    model: { text: \"TITLE\" },\n    siblingNode: sibling,\n  });\n};\nconst deleteNodes = (selectionModel, nodesToDel) => {\n  const mwd = selectionModel.config.mindWired();\n  mwd.deleteNodes(nodesToDel);\n};\nconst notifySelection = (selectionModel) => {\n  const { config } = selectionModel;\n  const nodes = selectionModel.getNodes();\n  setTimeout(() => config.emit(EVENT.NODE.SELECTED.CLIENT, { nodes }));\n};\nclass NodeSelectionModel {\n  /**\n   *\n   * @param {Configuration} config (see config.js)\n   */\n  constructor(config) {\n    this.config = config;\n    this.nodeMap = new Map(); // [uid:strng, NodeUI]\n\n    const canvasUI = this.config.getCanvas();\n    this.config.listen(EVENT.NODE.SELECTED, ({ node, append }) => {\n      const selected = this.nodeMap.has(node.uid);\n      if (append) {\n        this.nodeMap.set(node.uid, node);\n        node.setSelected(true);\n        notifySelection(this);\n      } else if (!selected) {\n        clearSelection(this.nodeMap);\n        this.nodeMap.set(node.uid, node);\n        node.setSelected(true); // toggling\n        notifySelection(this);\n      } else {\n      }\n    });\n    this.config.listen(EVENT.VIEWPORT.CLICKED, () => {\n      clearSelection(this.nodeMap);\n      canvasUI.hideSelection();\n      notifySelection(this);\n    });\n\n    dom.event.keyup(canvasUI.$viewport, (e) => {\n      if (this.isEmpty()) {\n        return;\n      }\n      const { code } = e;\n      const [nodeUI] = [...this.nodeMap.values()];\n      const editing = nodeUI.isEditingState();\n      if (\"Space\" === code && !editing) {\n        e.stopPropagation();\n        canvasUI.hideSelection();\n        this.config.emit(EVENT.NODE.EDITING, { editing: true, nodeUI });\n      } else if (\"Escape\" === code) {\n        this.config.emit(EVENT.NODE.EDITING, { editing: false, nodeUI });\n      }\n    });\n    dom.event.keydown(\n      canvasUI.$viewport,\n      (e) => {\n        const nodes = this.getNodes();\n        if (skipStateForInsert(nodes)) {\n          return;\n        }\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        appendNode(this, nodes[0].parent, nodes[0]);\n      },\n      \"enter\"\n    );\n    dom.event.keydown(\n      canvasUI.$viewport,\n      (e) => {\n        const nodes = this.getNodes();\n        if (skipStateForInsert(nodes)) {\n          return;\n        }\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        appendNode(this, nodes[0], nodes[0].lastChild());\n      },\n      \"shift@enter\"\n    );\n\n    dom.event.keydown(\n      canvasUI.$viewport,\n      (e) => {\n        const nodes = this.getNodes();\n        if (skipStateForDelete(nodes)) {\n          return;\n        }\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        deleteNodes(this, nodes);\n        clearSelection(this.nodeMap);\n        notifySelection(this);\n      },\n      \"delete\"\n    );\n  }\n  isEmpty() {\n    return this.nodeMap.size === 0;\n  }\n  getNodes() {\n    return [...this.nodeMap.values()];\n  }\n}\nexport default NodeSelectionModel;\n","import NodeSelectionModel from \"./node-selection-model\";\nconst createSelectionModel = (type, configuration) => {\n  return new NodeSelectionModel(configuration);\n};\nexport default {\n  createSelectionModel,\n};\n","import { EVENT } from \"../../service/event-bus\";\n\nexport default class NodeEditing {\n  constructor(config) {\n    this.config = config;\n    this.node = null;\n    this.config.listen(EVENT.VIEWPORT.CLICKED, () => {\n      this.close();\n    });\n    this.config.listen(EVENT.NODE.SELECTED, ({ node }) => {\n      if (this.node !== node) {\n        this.close(this.node);\n      }\n    });\n  }\n  isEditing() {\n    return !!this.node;\n  }\n  edit(nodeUI) {\n    if (this.node) {\n      this.close();\n      this.node = null;\n    }\n    const renderingContext = this.config.getNodeRenderer();\n    const nodeRenderer = renderingContext.getRenderer(nodeUI.model.type);\n    nodeRenderer.editor(nodeUI);\n    this.node = nodeUI;\n    this.node.setEditingState(true);\n  }\n  close() {\n    if (this.node) {\n      this.node.setEditingState(false);\n      const canvasUI = this.config.getCanvas();\n      canvasUI.hideNodeEditor(this.node);\n    }\n    this.node = null;\n  }\n}\n","const template = {\n  text: '<span class=\"mwd-node-text\"></span>',\n  editor: `<div class=\"mwd-node-editor plain-text-editbox\">\n    <textarea value=\"\"></textarea>\n    <button data-cmd=\"save\">SAVE</button>\n  </div>`,\n};\nclass PlainTextRenderer {\n  constructor(renderingContext) {\n    this.ctx = renderingContext;\n  }\n  install(nodeUI) {\n    const bodyEl = this.ctx.getNodeBody(nodeUI);\n    const $titleEl = this.ctx.parse(template.text);\n    bodyEl.append($titleEl);\n  }\n  render(nodeUI) {\n    const $titleEl = this.ctx.select(nodeUI, \".mwd-node-text\");\n    const { model } = nodeUI;\n    const lines = model.text\n      .split(\"\\n\")\n      .map((text) => `<p>${text}</p>`)\n      .join(\"\");\n    $titleEl.innerHTML = lines;\n  }\n  editor(nodeUI) {\n    const $editorEl = this.ctx.parse(template.editor, true);\n\n    const textArea = this.ctx.query($editorEl, \"textarea\");\n\n    const { model } = nodeUI;\n    textArea.value = model.text;\n    this.ctx.css(textArea, { width: 120, height: 40 });\n    this.ctx.event.click($editorEl, (e) => {\n      if (e.target.dataset.cmd === \"save\") {\n        nodeUI.updateModel((model) => {\n          model.text = textArea.value.trim();\n          return true;\n        });\n        this.ctx.endEditing();\n      }\n    });\n    this.ctx.installEditor(nodeUI, $editorEl).then(() => {\n      textArea.focus();\n    });\n    return $editorEl;\n  }\n  get name() {\n    return \"text\";\n  }\n}\nexport default PlainTextRenderer;\n","const template = {\n  viewer: `<div class=\"icon-badge-node\">\n    <img>\n    <span class=\"mwd-node-text\"></span>\n  </div>`,\n  editor: `<div class=\"\"></div>`,\n};\n/**\n *  ```\n *  icon-badge renderer\n *  +------+--------------+\n *  | IMG  |    T E X T   |\n *  +------+--------------+\n *\n *  [configuration]\n *  node: {\n *    model: {\n *      type: 'icon-badge',\n *      'icon-badge': {\n *        icon: 'https://image.url.value',\n *        text: 'text value'\n *      }\n *    },\n *    view: { ... }\n *  }\n * ```\n *\n */\nclass IconBadgeRenderer {\n  constructor(renderingContext) {\n    this.ctx = renderingContext;\n  }\n  get name() {\n    return \"icon-badge\";\n  }\n  install(nodeUI) {\n    const bodyEl = this.ctx.getNodeBody(nodeUI);\n    const $iconBadgeEl = this.ctx.parse(template.viewer);\n    bodyEl.append($iconBadgeEl);\n  }\n  render(nodeUI) {\n    const { model } = nodeUI;\n    const { icon, text } = model[\"icon-badge\"];\n    const $img = this.ctx.select(nodeUI, \"img\");\n    $img.src = icon;\n    const $span = this.ctx.select(nodeUI, \".mwd-node-text\");\n    $span.innerText = text;\n  }\n  startEditing(nodeUI) {\n    console.log(nodeUI);\n  }\n}\nexport default IconBadgeRenderer;\n","const template = {\n  viewer: `<div class=\"mwd-thumbnail-node\"><img draggable=\"false\"></div>`,\n  editor: `\n  <div class=\"mwd-node-editor thumnail-editor\">\n    <div class=\"inline-mwd-form\">\n      <input type=\"text\" data-form-size>\n    </div>\n    <div class=\"preview\">\n      <img class=\"img\"></img>\n    </div>\n    <div class=\"path-form\">\n        <textarea></textarea>\n      </div>\n  </div>`,\n};\n/**\n * ```\n * [configuration]\n * node: {\n *   model: {\n *     type: 'thumnail',\n *     thunmail: {\n *       path: 'https://image.url.value',\n *       size: 40,\n *     }\n *   }\n * }\n * ```\n */\nconst renderThumnail = (el, ctx, model) => {\n  const { path, size } = model;\n  ctx.css(el, {\n    width: size,\n    height: size,\n    backgroundImage: `url(${path})`,\n  });\n};\nclass ThumbnailRenderer {\n  constructor(renderingContext) {\n    this.ctx = renderingContext;\n  }\n  get name() {\n    return \"thumbnail\";\n  }\n  install(nodeUI) {\n    const bodyEl = this.ctx.getNodeBody(nodeUI);\n    const $thumnailEl = this.ctx.parse(template.viewer);\n    bodyEl.append($thumnailEl);\n  }\n  render(nodeUI) {\n    const { model } = nodeUI;\n    // const { path, size } = model[\"thumbnail\"];\n    const $div = this.ctx.select(nodeUI, \".mwd-thumbnail-node img\");\n    // renderThumnail($div, this.ctx, model.thumbnail);\n    this.ctx.css($div, { width: model.thumbnail.size, height: \"auto\" });\n    $div.src = model.thumbnail.path;\n  }\n  editor(nodeUI) {\n    const { model } = nodeUI;\n    if (model.type !== \"thumbnail\") {\n      throw new Error(\"EDITOR_ERROR:not a thumbnail node\");\n    }\n    const { path, size } = model.thumbnail;\n\n    const $editorEl = this.ctx.parse(template.editor, true);\n    const $inputEl = this.ctx.query($editorEl, \"input\");\n    $inputEl.value = size;\n    this.ctx.event.keyup(\n      $inputEl,\n      (e) => {\n        const value = e.target.value.trim();\n        this.ctx.valid.number(value).then((num) => {\n          nodeUI.updateModel((model) => {\n            model.thumbnail.size = num;\n            this.ctx.css($imgEl, { width: num });\n            return true;\n          });\n        });\n      },\n      \"enter\"\n    );\n    const $textArea = this.ctx.query($editorEl, \"textarea\");\n    this.ctx.event.keydown(\n      $textArea,\n      (e) => {\n        const url = e.target.value.trim();\n        this.ctx.valid.path(url).then((url) => {\n          nodeUI.updateModel((model) => {\n            model.thumbnail.path = url;\n            $imgEl.src = url;\n            return true;\n          });\n        });\n      },\n      \"enter\"\n    );\n    const $imgEl = this.ctx.query($editorEl, \".preview .img\");\n    this.ctx.css($imgEl, {\n      width: size,\n      height: \"auto\",\n    });\n    $imgEl.src = path;\n    let visible = false;\n    this.ctx.event.click($imgEl, (e) => {\n      visible = !visible;\n      const display = visible ? \"flex\" : \"none\";\n      const pathForm = this.ctx.query($editorEl, \".path-form\");\n      this.ctx.css(pathForm, { display });\n      if (visible) {\n        $textArea.value = model.thumbnail.path;\n      }\n    });\n    // renderThumnail($imgEl, this.ctx, model.thumbnail);\n    this.ctx.installEditor(nodeUI, $editorEl).then(() => {\n      console.log(\"done\");\n    });\n  }\n}\nexport default ThumbnailRenderer;\n","import { dom, uuid } from \"../../service\";\nimport { EVENT } from \"../../service/event-bus\";\n\nconst renderings = new Map();\n\nclass NodeRenderingContext {\n  constructor(canvasUI) {\n    this.canvas = canvasUI;\n    this.uid = `node-rctx-${uuid()}`;\n    renderings.set(this.uid, new Map());\n    this.editingNode = null;\n  }\n  get event() {\n    return dom.event;\n  }\n  get valid() {\n    return dom.valid;\n  }\n  parse(htmlTemplate, fitToCenter) {\n    const $el = dom.parseTemplate(htmlTemplate);\n    if (fitToCenter) {\n      dom.css($el, {\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n      });\n    }\n    return $el;\n  }\n  register(renderer) {\n    renderings.get(this.uid).set(renderer.name, renderer);\n  }\n  getNodeBody(nodeUI) {\n    return this.canvas.getNodeBody(nodeUI);\n  }\n  getRenderer(type) {\n    const renderer = renderings.get(this.uid).get(type || \"text\");\n    if (!renderer) {\n      throw new Error(`[No Renderer] no such renderer, (type:${type})`);\n    }\n    return renderer;\n  }\n  select(nodeUI, cssSelector) {\n    return nodeUI.$bodyEl.querySelector(cssSelector);\n  }\n  installEditor(nodeUI, $editorEl) {\n    this.editingNode = nodeUI;\n    return this.canvas.showNodeEditor(nodeUI, $editorEl);\n  }\n  css(el, styles) {\n    dom.css(el, styles);\n  }\n  query(el, cssSelector) {\n    return dom.findOne(el, cssSelector);\n  }\n  endEditing() {\n    this.canvas.hideNodeEditor(this.editingNode);\n    this.canvas.config.emit(EVENT.NODE.EDITING, {\n      editing: false,\n      nodeUI: this.editingNode,\n    });\n    this.editingNode = null;\n  }\n}\nexport default NodeRenderingContext;\n","import PlainTextRenderer from \"./renderer/plain-text-renderer\";\nimport IconBadgeRenderer from \"./renderer/icon-badge-renderer\";\nimport ThumbnailRenderer from \"./renderer/thumbnail-renderer\";\nimport NodeRenderingContext from \"./node-rendering-context\";\nconst createRenderingContext = (canvasUI) => new NodeRenderingContext(canvasUI);\n\nconst getRenderer = (type) => {\n  return renderings.get(type);\n};\n\nconst install = (canvasUI) => {\n  const ctx = createRenderingContext(canvasUI);\n  const plainTextRenderer = new PlainTextRenderer(ctx);\n  ctx.register(plainTextRenderer);\n  const iconBadgeRenderer = new IconBadgeRenderer(ctx);\n  ctx.register(iconBadgeRenderer);\n  const thumnailRenderer = new ThumbnailRenderer(ctx);\n  ctx.register(thumnailRenderer);\n  return ctx;\n};\nexport default {\n  install,\n  getRenderer,\n};\n","import dom from \"./dom\";\nimport clone from \"./clone\";\nconst uuid = (len) => {\n  len = len || 16;\n  let id = \"\";\n  while (id.length < len) {\n    id += Math.random().toString(36).substring(2);\n  }\n  return id.substring(0, len);\n};\nexport { dom, clone, uuid };\nexport default {\n  dom,\n  clone,\n  uuid,\n};\n","const captureSnapLines = (nodes, node, hSnaps, vSnaps) => {\n  if (nodes.includes(node)) {\n    return;\n  }\n  const dim = node.dimension();\n  // top, center, bottom\n  hSnaps.add(dim.y);\n  hSnaps.add(dim.cy);\n  hSnaps.add(dim.b);\n  // left, center, right\n  vSnaps.add(dim.x);\n  vSnaps.add(dim.cx);\n  vSnaps.add(dim.r);\n  if (node.isFolded()) {\n    return;\n  }\n  node.subs.forEach((child) => {\n    captureSnapLines(nodes, child, hSnaps, vSnaps);\n  });\n};\nconst abs = (a) => Math.abs(a);\nconst adj = (points, dim, dir) => {\n  return points.reduce((adj, p) => {\n    const a = dim[dir] - adj;\n    const b = dim[dir] - p;\n    return abs(a) <= abs(b) ? adj : p;\n  }, points[0]);\n};\nconst minGapIndex = (gaps) =>\n  gaps.reduce(\n    (minIdx, gap, idx) => (abs(gap) < abs(gaps[minIdx]) ? idx : minIdx),\n    0\n  );\nconst lineStyling = (ctx, ui, dir) => {\n  ctx.strokeStyle = ui.snap.color[dir];\n  ctx.lineWidth = ui.snap.width || 0.4;\n  if (ui.snap.dash) {\n    ctx.setLineDash(ui.snap.dash);\n  }\n};\nexport default class AligmentUI {\n  /**\n   *\n   * @param {Configuration} config (see config.js)\n   */\n  constructor(config) {\n    this.config = config;\n  }\n  turnOn(rootNode, nodes) {\n    if (!nodes || nodes.length === 0 || !this.config.snapEnabled) {\n      return;\n    }\n    const vLines = new Set(); // [x in (x,0), (x,H)]\n    const hLines = new Set(); // [y in (0,y), (W,y)]\n    this.activeNodes = [...nodes];\n    captureSnapLines(nodes, rootNode, hLines, vLines, this.config.scale);\n    this.snaps = { hLines, vLines };\n  }\n  turnOff() {\n    this.callback = null;\n    this.snaps = null;\n    this.node = null;\n  }\n  doAlign() {\n    if (!this.snaps || this.snaps.length === 0) {\n      return;\n    }\n    const { ui } = this.config;\n    const node = this.activeNodes[0];\n    const limit = ui.snap.limit;\n    const snap = ui.snap.limit;\n    const canvas = this.config.getCanvas();\n    canvas.clear();\n\n    const dim = node.dimension();\n    const vLines = [...this.snaps.vLines.values()].filter(\n      (x) =>\n        Math.abs(dim.x - x) <= limit ||\n        Math.abs(dim.r - x) <= limit ||\n        abs(dim.cx - x) <= limit\n    );\n    const hLines = [...this.snaps.hLines.values()].filter(\n      (y) =>\n        Math.abs(dim.y - y) <= limit ||\n        Math.abs(dim.b - y) <= limit ||\n        Math.abs(dim.cy - y) <= limit\n    );\n\n    const delta = { x: 0, y: 0 };\n    if (vLines.length > 0) {\n      const adjL = adj(vLines, dim, \"x\");\n      const adjC = adj(vLines, dim, \"cx\");\n      const adjR = adj(vLines, dim, \"r\");\n      const gaps = [adjC - dim.cx, adjL - dim.x, adjR - dim.r];\n      const idx = minGapIndex(gaps);\n      if (abs(gaps[idx]) <= snap) {\n        delta.x = gaps[idx];\n      }\n      if (this.config.snapEnabled) {\n        canvas.drawVLines([adjL, adjC, adjR], (ctx) =>\n          lineStyling(ctx, ui, \"vertical\")\n        );\n      }\n    }\n\n    if (hLines.length > 0) {\n      const adjT = adj(hLines, dim, \"y\");\n      const adjC = adj(hLines, dim, \"cy\");\n      const adjB = adj(hLines, dim, \"b\");\n\n      const gaps = [adjC - dim.cy, adjT - dim.y, adjB - dim.b];\n      const idx = minGapIndex(gaps);\n      if (abs(gaps[idx]) <= snap) {\n        delta.y = gaps[idx];\n      }\n      if (this.config.snapEnabled) {\n        canvas.drawHLines([adjT, adjC, adjB], (ctx) =>\n          lineStyling(ctx, ui, \"horizontal\")\n        );\n      }\n    }\n\n    this.activeNodes.forEach((each) => {\n      const off = each.offset();\n      off.x += delta.x;\n      off.y += delta.y;\n      each.setOffset(off);\n    });\n    // node.setOffset(pos);\n  }\n}\n","import { clone } from \"../../service\";\n\nconst NO_OP = (_) => _;\nconst buildTree = (dataSource, dataSet, parentSet) => {\n  const nodeConfigs = dataSet.toNodeConfigs(parentSet, dataSource);\n  const childSets = dataSource.childSetOf(dataSet.name);\n  childSets.forEach((childSet) => {\n    buildTree(dataSource, childSet, dataSet);\n  });\n  return nodeConfigs;\n};\n/**\n * datasource for tree structure\n */\nclass DataSet {\n  constructor(name, userDataList, parentType, callbacks) {\n    this.name = name;\n    this.userDataList = userDataList;\n    this.parentType = parentType;\n    this.callbacks = callbacks;\n  }\n  toNodeConfigs(parentSet, dataSource) {\n    let relation = parentSet ? this.callbacks.relation : null;\n    return this.userDataList.map((userData, index) => {\n      const config = { userData, subs: [] };\n      const { model } = this.callbacks;\n      config.model =\n        typeof model === \"function\" ? model(userData) : clone.deepCopy(model);\n\n      if (relation) {\n        const parent = relation(userData, parentSet.userDataList);\n        const parentConfig = dataSource.$ref.get(parent);\n        config.idx = parentConfig.subs.length;\n        parentConfig.subs.push(config);\n      }\n      const { view } = this.callbacks;\n      if (typeof view === \"function\") {\n        config.view = view(userData, config.idx);\n      } else if (typeof view === \"object\") {\n        config.view = clone.deepCopy(view);\n      } else {\n        config.view = { x: 0, y: 0 };\n      }\n      // config.view =\n      //   typeof view === \"function\"\n      //     ? view(userData, config.idx)\n      //     : { x: 0, y: 0 };\n      // how to determine config.view = {x, y}\n      // config.view = {x:0, y:0}\n      dataSource.$ref.set(userData, config);\n      return config;\n    });\n  }\n}\nexport default class TreeDataSource {\n  constructor() {\n    this.dataSets = new Map();\n    this.rootType = null;\n    this.$ref = new Map(); // [{userData, nodeConfig}]\n  }\n  root(dataType, userData, option) {\n    const dataList = [];\n    if (!option) {\n      option = userData;\n      dataList.push({});\n    } else {\n      dataList.push(userData);\n    }\n    const virtualRoot = !option.virtual;\n    this.rootType = dataType;\n    option.relation = NO_OP;\n    return this.dataSet(dataType, dataList, option);\n  }\n  childSetOf(parentType) {\n    return [...this.dataSets.values()].filter(\n      (dset) => dset.parentType === parentType\n    );\n  }\n  dataSet(dataType, userDataList, option) {\n    const callbacks = {};\n    callbacks.relation = option.relation || NO_OP;\n    callbacks.model = option.model || NO_OP;\n    callbacks.view = option.view;\n    const type = dataType.trim();\n    if (this.dataSets.has(type)) {\n      throw new Error(`[MIND WIRED] existing data type: [${dataType}]`);\n    }\n    const dataSet = new DataSet(type, userDataList, option.parent, callbacks);\n    this.dataSets.set(type, dataSet);\n    return this;\n  }\n  build() {\n    const rootSet = this.dataSets.get(this.rootType);\n    const rootDataSet = buildTree(this, rootSet);\n    return rootDataSet[0];\n  }\n}\n","/**\n * direction relative to parent node\n */\n\nconst resolve = (format) => {\n  if (\"LR\" === format) {\n    return { dir: \"horizontal\", pos: [-1, 1] };\n  } else if (\"RL\" === format) {\n    return { dir: \"horizontal\", pos: [1, -1] };\n  } else if (\"TB\" === format) {\n    return { dir: \"vertical\", pos: [-1, 1] };\n  } else if (\"BT\" === format) {\n    return { dir: \"vertical\", pos: [1, -1] };\n  }\n};\nclass Direction {\n  constructor(nodeUI) {\n    this.node = nodeUI;\n    this.prev = null;\n    this.capture();\n  }\n  get horizontal() {\n    const { x } = this.node;\n    return x <= 0 ? -1 : 1;\n  }\n  get vertical() {\n    const { y } = this.node;\n    return y <= 0 ? -1 : 1;\n  }\n  updated(format) {\n    const { dir, pos } = resolve(format);\n    const cur = this[dir];\n    return this.prev[dir] === pos[0] && cur === pos[1];\n  }\n  capture() {\n    const { x, y } = this.node;\n    this.prev = {\n      horizontal: x <= 0 ? -1 : 1,\n      vertical: y <= 0 ? -1 : 1,\n    };\n  }\n}\n\nexport default Direction;\n","import Direction from \"./direction\";\n\nconst capturePos = (posMap, nodeUI) => {\n  posMap.set(nodeUI, nodeUI.getPos());\n  nodeUI.subs.forEach((childUI) => capturePos(posMap, childUI));\n};\n\nclass Capture {\n  constructor(nodeUI, posMap) {\n    this.node = nodeUI;\n    this.pos = nodeUI.getPos();\n    this.dir = new Direction(nodeUI);\n    capturePos(posMap, nodeUI);\n  }\n}\nexport default class DragContext {\n  constructor() {\n    this.capture = new Map(); //<NodeUI, Capture>\n    this.posMap = new Map();\n  }\n  prepareDnd(nodes) {\n    nodes\n      .filter((node) => !node.isRoot())\n      .forEach((node) => {\n        this.capture.set(node, new Capture(node, this.posMap));\n      });\n  }\n  eachCapture(callback) {\n    for (let capture of this.capture.values()) {\n      callback(capture);\n    }\n  }\n  getUpdatedNodes() {\n    let updated = [];\n    this.posMap.forEach((pos, nodeUI) => {\n      if (pos.x !== nodeUI.x || pos.y !== nodeUI.y) {\n        updated.push(nodeUI);\n      }\n    });\n    return updated;\n  }\n  clear() {\n    this.capture.clear();\n    this.posMap.clear();\n  }\n}\n","import { EVENT } from \"../service/event-bus\";\nimport CanvasUI from \"./canvas-ui\";\nimport EdgeUI from \"./edge-ui\";\nimport NodeUI from \"./node-ui\";\nimport layoutManager from \"./layout\";\nimport selection from \"./selection\";\nimport { NodeEditing } from \"./editing\";\nimport nodeRenderer from \"./node\";\nimport AlignmentUI from \"./alignment/alignment-ui\";\nimport { dom } from \"../service\";\nimport TreeDataSource from \"./datasource/tree-ds\";\nimport DragContext from \"./drag-context\";\n\nconst exportTree = (config, nodeUI) => {\n  const v = nodeUI.config.view;\n  const view = {\n    x: v.x,\n    y: v.y,\n  };\n  if (nodeUI.isRoot()) {\n    view.x = config.ui.offset.x;\n    view.y = config.ui.offset.y;\n  }\n  if (v.layout) {\n    view.layout = v.layout;\n  }\n  if (v.edge) {\n    view.edge = v.edge;\n  }\n  const subs = [];\n  nodeUI.subs.forEach((childUI) => {\n    subs.push(exportTree(config, childUI));\n  });\n  return {\n    model: nodeUI.model,\n    view,\n    subs,\n  };\n};\nconst repaintTree = (mwd, node, propagate = true) => {\n  node.repaint();\n  if (propagate) {\n    node.subs.forEach((childNode) => {\n      repaintTree(mwd, childNode);\n    });\n  }\n};\nconst updateLevelClass = (nodeUI, method, config) => {\n  const className = config.nodeLevelClassName(nodeUI);\n  dom.clazz[method](nodeUI.$bodyEl, className);\n  nodeUI.subs.forEach((childUI) => updateLevelClass(childUI, method, config));\n};\nclass MindWired {\n  /**\n   *\n   * @param {Configuration} configuration (config.js)\n   */\n  constructor(config) {\n    this.config = config;\n    config.mindWired = () => this;\n\n    this.canvas = new CanvasUI(config);\n    config.getCanvas = () => this.canvas;\n\n    this.nodeRenderingContext = nodeRenderer.install(this.canvas);\n    config.getNodeRenderer = () => this.nodeRenderingContext;\n\n    this.nodeSelectionModel = selection.createSelectionModel(\"node\", config);\n    this.nodeEditor = new NodeEditing(config);\n    this.alignmentUI = new AlignmentUI(config);\n    this.dragContext = new DragContext();\n\n    this.config.listen(EVENT.DRAG.VIEWPORT, (e) => {\n      this.config.setOffset(e.offset);\n      // this.repaint();\n      this.canvas.repaintNodeHolder();\n      this.edgeUI.repaint();\n      if (e.state === \"DONE\") {\n        this.rootUI.setPos(e.offset.x, e.offset.y);\n        try {\n          this.config.emit(EVENT.NODE.UPDATED.CLIENT, {\n            nodes: [this.rootUI],\n            type: \"pos\",\n          });\n        } finally {\n          this.rootUI.setPos(0, 0);\n        }\n      }\n    });\n\n    this.config\n      .listen(EVENT.DRAG.NODE, (e) => {\n        if (e.state === \"READY\") {\n          const nodes = this.nodeSelectionModel.getNodes();\n          /*\n           * shift@click on nodes redirects dragging to their children\n           */\n          const dragTargets =\n            e.target === \"all\" ? nodes : nodes.flatMap((node) => node.subs);\n          // this.draggingNodes = capatureDragData(dragTargets);\n          this.dragContext.prepareDnd(dragTargets);\n          this.alignmentUI.turnOn(this.rootUI, dragTargets);\n          this.canvas.drawSelection(nodes);\n        } else if (e.state === \"DRAG\") {\n          const acceleration = e.target === \"all\" ? 1 : 2.5;\n          this.dragContext.eachCapture((dragging) => {\n            const { node, dir, pos } = dragging;\n            dir.capture();\n            node.setPos(\n              acceleration * e.x + pos.x,\n              acceleration * e.y + pos.y,\n              !this.config.snapEnabled\n            );\n          });\n          this.alignmentUI.doAlign();\n          this.dragContext.eachCapture((dragging) => {\n            const { node, dir } = dragging;\n            layoutManager.layout(node, { dir, layoutManager });\n          });\n          this.canvas.drawSelection(this.nodeSelectionModel.getNodes());\n          this.edgeUI.repaint(!this.config.snapEnabled, false);\n        } else if (e.state === \"DONE\") {\n          this.alignmentUI.turnOff();\n          this.edgeUI.repaint(true);\n          const nodes = this.dragContext.getUpdatedNodes();\n          if (nodes.length > 0) {\n            this.config.emit(EVENT.NODE.UPDATED.CLIENT, {\n              nodes,\n              type: \"pos\",\n            });\n          }\n          this.dragContext.clear();\n        }\n      })\n      .listen(EVENT.NODE.EDITING, ({ editing, nodeUI }) => {\n        // console.log(\"[edit]\", nodeUI);\n        if (editing) {\n          this.nodeEditor.edit(nodeUI);\n        } else {\n          this.nodeEditor.close();\n        }\n      })\n      .listen(EVENT.NODE.FOLDED, ({ node }) => {\n        this.canvas.updateFoldingNodes(node);\n      })\n      .listen(EVENT.NODE.UPDATED, (nodes) => {\n        nodes.forEach((node) => node.repaint());\n        this.edgeUI.repaint();\n        this.config.emit(EVENT.NODE.UPDATED.CLIENT, { nodes, type: \"model\" });\n      });\n  }\n  isEditing() {\n    return this.nodeEditor.isEditing();\n  }\n  nodes(elems) {\n    if (elems instanceof TreeDataSource) {\n      const root = elems.build();\n      this.rootUI = NodeUI.build(root, this.config);\n    } else {\n      this.rootUI = NodeUI.build(elems, this.config);\n    }\n    this.edgeUI = new EdgeUI(this.config, this.rootUI, this.canvas);\n    this.config.ui.offset.x = this.rootUI.config.view.x;\n    this.config.ui.offset.y = this.rootUI.config.view.y;\n    this.rootUI.config.view.x = 0;\n    this.rootUI.config.view.y = 0;\n\n    this.repaint();\n    return this;\n  }\n  findNode(predicate) {\n    return this.rootUI.find(predicate);\n  }\n  addNode(parentNode, nodeData, option) {\n    const data = {\n      model: nodeData.model,\n      view: nodeData.view,\n    };\n    if (!data.view) {\n      data.view = {\n        x: 100,\n        y: 0,\n      };\n    }\n    const nodeUI = new NodeUI(data, this.config, parentNode);\n    this.canvas.regsiterNode(nodeUI);\n    parentNode.addChild(nodeUI);\n    if (nodeData.siblingNode) {\n      const rect = dom.domRect(nodeData.siblingNode.$bodyEl);\n      layoutManager.setPosition(nodeUI, {\n        baseNode: nodeData.siblingNode,\n        rect,\n      });\n    }\n    nodeUI.repaint();\n    // this.canvas.repaint(nodeUI);\n\n    this.config.emit(EVENT.NODE.CREATED, { nodes: [nodeUI] }, true);\n    if (option && (option.editing || option.select)) {\n      this.config.emit(EVENT.NODE.SELECTED, { node: nodeUI });\n    }\n    if (option && option.editing) {\n      this.nodeEditor.edit(nodeUI);\n    }\n  }\n  moveNodes(parentNode, nodes, trigger) {\n    const childNodes = nodes.filter((node) => node.parent !== parentNode);\n    childNodes.forEach((child) => {\n      updateLevelClass(child, \"remove\", this.config);\n      const prevParent = parentNode.addChild(child);\n      updateLevelClass(child, \"add\", this.config);\n\n      this.config.emit(EVENT.NODE.MOVED, { node: child, prevParent });\n    });\n    parentNode.setFolding(false);\n    repaintTree(this, parentNode);\n    this.canvas.drawSelection(nodes);\n    if (trigger) {\n      this.config.emit(EVENT.NODE.UPDATED.CLIENT, {\n        nodes: childNodes,\n        type: \"path\",\n      });\n    }\n  }\n  deleteNodes(nodes) {\n    const updated = [];\n    const deleted = [];\n    nodes.forEach((node) => {\n      const { parent, childNodes } = node;\n      if (childNodes.length > 0) {\n        // 1. move node.children to node.parent\n        childNodes.forEach((child) => {\n          // keep position\n          child.setPos(child.x + node.x, child.y + node.y);\n        });\n        this.moveNodes(parent, childNodes);\n        // child node can be in deleted nodes\n        updated.push(...childNodes.filter((c) => !nodes.includes(c)));\n      }\n      // 2. delete node(which has no children)\n      const deletedChild = node.parent.removeChild(node);\n      if (deletedChild) {\n        this.canvas.unregisterNode(deletedChild);\n        this.config.emit(EVENT.NODE.DELETED, deletedChild);\n        deleted.push(node);\n      }\n    });\n    if (updated.length > 0) {\n      this.config.emit(EVENT.NODE.UPDATED.CLIENT, {\n        nodes: updated,\n        type: \"path\",\n      });\n    }\n    if (deleted.length > 0) {\n      this.config.emit(EVENT.NODE.DELETED.CLIENT, { nodes: deleted });\n    }\n  }\n  getSelectedNodes() {\n    return this.nodeSelectionModel.getNodes();\n  }\n  setLayout(layoutSpec, nodeUI) {\n    const targetNode = nodeUI || this.rootUI;\n    targetNode.config.view.layout = layoutSpec;\n    this.repaint();\n  }\n  setEdge(edgeSpec, nodeUI) {\n    const targetNode = nodeUI || this.rootUI;\n    targetNode.config.view.edge = edgeSpec;\n    this.repaint(nodeUI);\n  }\n  setScale(scale) {\n    this.config.ui.scale = scale;\n    console.log(this.config.ui.scale);\n    this.repaint();\n  }\n  repaint(nodeUI) {\n    nodeUI = nodeUI || this.rootUI;\n    repaintTree(this, nodeUI);\n    this.canvas.repaintNodeHolder();\n    layoutManager.layout(nodeUI, { dir: null });\n    this.edgeUI.repaint();\n\n    this.canvas.hideSelection();\n    this.canvas.drawSelection(this.getSelectedNodes());\n  }\n  listen(event, callback) {\n    this.config.ebus.listen(`${event}.client`, callback);\n    return this;\n  }\n  export() {\n    const node = exportTree(this.config, this.rootUI);\n    return Promise.resolve(JSON.stringify(node));\n  }\n}\n\nexport { MindWired };\n","import { dom } from \"../../service\";\n\nconst changeParentDndHandler = (canvasUI) => ({\n  beforeDrag: (e) => {\n    const { target } = e.originalEvent;\n    const iconEl = target;\n    const mrd = canvasUI.config.mindWired();\n    const { scale } = canvasUI.config;\n    canvasUI.dndContext.capture(\"iconEl\", iconEl);\n  },\n  dragging: (e) => {\n    const { dx, dy } = e;\n    const iconEl = canvasUI.dndContext.getData(\"iconEl\");\n    dom.css(iconEl, {\n      transform: `translate(calc(-50% + ${dx}px), ${dy}px)`,\n    });\n  },\n  afterDrag: () => {\n    const iconEl = canvasUI.dndContext.getData(\"iconEl\");\n    const rect = dom.domRect(iconEl);\n    const cx = rect.x + rect.width / 2;\n    const cy = rect.y + rect.height / 2;\n    dom.css(iconEl, {\n      transform: `translate(-50%, 0)`,\n    });\n    const newParentNode = canvasUI.findNodeAt(cx, cy);\n    if (newParentNode) {\n      const mrd = canvasUI.config.mindWired();\n      const nodes = mrd.getSelectedNodes();\n      if (\n        nodes.filter((child) => newParentNode.isDescendantOf(child)).length > 0\n      ) {\n        // dropping parent on child\n      } else {\n        const mwd = canvasUI.config.mindWired();\n        mwd.moveNodes(newParentNode, nodes, true);\n      }\n    }\n  },\n});\nexport default changeParentDndHandler;\n","import { dom } from \"../../service\";\nimport { EVENT } from \"../../service/event-bus\";\n/**\n * handles viewport dragging\n */\n\nconst nodeDndHandler = (canvasUI) => ({\n  beforeDrag: (e) => {\n    const { target } = e.originalEvent;\n    const nodeEl = dom.closest(target, \".mwd-node\");\n    const nodeId = nodeEl.dataset.uid;\n    canvasUI.dndContext.capture(\"nodeId\", nodeId);\n    const mrd = canvasUI.config.mindWired();\n    const node = mrd.findNode((node) => node.uid === nodeId);\n    canvasUI.config.emit(EVENT.NODE.SELECTED, {\n      node,\n      append: e.originalEvent.shiftKey,\n    });\n    canvasUI.config.emit(EVENT.DRAG.NODE, {\n      nodeId,\n      state: \"READY\",\n      target: e.originalEvent.shiftKey ? \"children\" : \"all\",\n      x: 0,\n      y: 0,\n    });\n  },\n  dragging: (e) => {\n    const { dx, dy } = e;\n    const nodeId = canvasUI.dndContext.getData(\"nodeId\");\n    const { scale } = canvasUI.config;\n    // const scale = 1;\n    canvasUI.config.emit(EVENT.DRAG.NODE, {\n      nodeId,\n      state: \"DRAG\",\n      target: e.originalEvent.shiftKey ? \"children\" : \"all\",\n      x: dx / scale,\n      y: dy / scale,\n    });\n  },\n  afterDrag: (e) => {\n    // console.log(\"[DND AFTER]\", e);\n    const { dx, dy } = e;\n    // canvasUI.shiftBy(dx, dy);\n    const nodeId = canvasUI.dndContext.getData(\"nodeId\");\n    const { scale } = canvasUI.config;\n    // const scale = 1;\n    canvasUI.config.emit(EVENT.DRAG.NODE, {\n      nodeId,\n      state: \"DONE\",\n      target: e.originalEvent.shiftKey ? \"children\" : \"all\",\n      x: dx / scale,\n      y: dy / scale,\n    });\n  },\n});\n\nexport default nodeDndHandler;\n","import { dom, clone } from \"../service\";\nimport { EventBus } from \"../service/event-bus\";\n\nconst DEFAULT_UI_CONFIG = {\n  width: 600,\n  height: 600,\n  scale: 1.0,\n  clazz: {\n    node: \"active-node\",\n    edge: \"active-edge\",\n    level: (level) => `level-${level}`,\n  },\n  offset: { x: 0, y: 0 },\n  snap: {\n    limit: 4,\n    width: 0.4,\n    dash: [6, 2],\n    color: { horizontal: \"orange\", vertical: \"#2bc490\" },\n  },\n  selection: {\n    padding: 5,\n    \"background-color\": \"#b3ddff6b\",\n    \"border-radius\": \"4px\",\n  },\n};\nclass Configuration {\n  constructor({ el, ui }) {\n    this.el = el;\n    this.ui = ui;\n    this.ebus = new EventBus();\n  }\n  get width() {\n    return this.ui.width;\n  }\n  get height() {\n    return this.ui.height;\n  }\n  get scale() {\n    return this.ui.scale;\n  }\n  get snapEnabled() {\n    return this.ui.snap.enabled;\n  }\n  getOffset() {\n    const offset = this.ui.offset;\n    return { ...offset };\n  }\n  setOffset(offset) {\n    this.ui.offset = { ...offset };\n  }\n  relativeOffset(offset) {\n    const baseOffset = this.ui.offset;\n    return { x: baseOffset.x + offset.x, y: baseOffset.y + offset.y };\n  }\n  activeClassName(type) {\n    const className = this.ui.clazz[type];\n    if (!className) {\n      throw new Error(`[MINDWIRED][ERROR] no classname of type : \"${type}\"`);\n    }\n    return className;\n  }\n  nodeLevelClassName(node) {\n    const method = this.ui.clazz.level;\n    if (!dom.types.method(method)) {\n      throw new Error(\n        `clazz.level should be function, but ${typeof method}. (level, node) => {} `\n      );\n    }\n    const className = method\n      ? method(node.level(), node)\n      : `level-${node.level()}`;\n\n    return className;\n  }\n  listen(eventName, callback) {\n    this.ebus.on(eventName, callback);\n    return this;\n  }\n  off(eventName, callback) {\n    this.ebus.off(eventName, callback);\n  }\n  emit(eventName, args, emitForClient) {\n    this.ebus.emit(eventName, args, !!emitForClient);\n    return this;\n  }\n}\n\nconst normalizeSnap = (ui) => {\n  const { snap } = ui;\n  if (snap === false) {\n    ui.snap = clone.deepCopy(DEFAULT_UI_CONFIG.snap);\n    ui.snap.enabled = false;\n  } else {\n    if (dom.valid.string(snap.color)) {\n      snap.color = {\n        horizontal: snap.color.trim(),\n        vertical: snap.color.trim(),\n      };\n    }\n    snap.limit = snap.limit || DEFAULT_UI_CONFIG.snap.limit;\n    snap.width = snap.width || DEFAULT_UI_CONFIG.snap.width;\n    if (snap.dash !== false) {\n      snap.dash = snap.dash || DEFAULT_UI_CONFIG.snap.dash;\n    }\n    snap.enabled = true;\n  }\n};\nConfiguration.parse = (config) => {\n  const cssSelector = config.el;\n  const ui = clone.mergeLeaf(\n    config.ui || {},\n    clone.deepCopy(DEFAULT_UI_CONFIG)\n  );\n\n  normalizeSnap(ui);\n\n  const el =\n    typeof config.el === \"string\"\n      ? document.querySelector(config.el)\n      : config.el;\n  return new Configuration({ el, ui });\n};\nexport default Configuration;\n","import { dom } from \"./service\";\nimport { MindWired } from \"./components/mind-wired\";\nimport Configuration from \"./components/config\";\nimport \"./assets/mind-wired.scss\";\nimport \"./assets/extra/mind-wired-editor.scss\";\nimport TreeDataSource from \"./components/datasource/tree-ds\";\n\nconst injectCanvas = (el) => {\n  const canvas = dom.tag.canvas();\n  el.append(canvas);\n};\nconst autoInstallation = () => {\n  const el = document.querySelector(\"[mind-wired-holder]\");\n  if (el) {\n    let canvasEl = dom.findOne(el, \"canvas\");\n    if (!canvasEl) {\n      canvasEl = injectCanvas(el);\n    }\n  }\n};\n\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\n  autoInstallation();\n});\n\nconst init = (config) => {\n  const { el } = config;\n  return new Promise((success, failure) => {\n    if (el) {\n      const configObj = Configuration.parse(config);\n      const mrd = new MindWired(configObj);\n      success(mrd);\n    } else {\n      failure({ cause: \"no_css_selector\" });\n    }\n  });\n};\n\nconst createDataSource = () => new TreeDataSource();\n\nexport { init, createDataSource };\n\nexport default { init, createDataSource };\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","Attr","constructor","attrExpression","expression","isClass","charAt","isId","substring","setAttribute","el","classList","add","closest","elem","selector","nodeType","parentElement","nodeTye","nodeName","parseAttr","split","map","val","trim","filter","createEl","tagName","attributes","tag","createElement","forEach","span","attr","content","innerHTML","iconButton","attrs","button","img","imgUrl","Promise","resolve","reject","onload","width","naturalWidth","height","naturalHeight","onerror","console","log","crossOrigin","div","canvas","registerEvent","target","eventName","callback","options","addEventListener","registerKeyEvent","option","code","toLowerCase","keys","i","ctrlKey","shiftKey","altKey","metaKey","alt","meta","shift","ctrl","parseKeyOption","keyFormat","metaKeys","metas","includes","data","int","attrList","d","v","dataset","parseInt","stopPropagation","createEventBus","EventBus","consume","focus","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","click","keydown","keyup","resize","converters","attrName","attrValue","always","getAttribute","clazz","className","remove","imageSize","xhr","XMLHttpRequest","open","onreadystatechange","readyState","DONE","getResponseHeader","send","fileToImage","file","reader","FileReader","result","readAsDataURL","event","css","styles","style","parseTemplate","template","params","t","text","replaceAll","virtualElem","firstElementChild","findOne","cssSelector","querySelector","is","searchParent","found","matches","domRect","getBoundingClientRect","types","method","valid","path","yes","no","number","n","parseFloat","Number","isNaN","string","isPrimitive","deepCopy","dst","Array","isArray","mergeLeaf","undefined","EVENT","DRAG","VIEWPORT","name","desc","NODE","SELECTION","EDIT","CREATED","CLIENT","DELETED","UPDATED","SELECTED","EDITING","FOLDED","RESIZED","CLICKED","EMPTY_SET","Set","callbacks","Map","on","callbackList","set","off","eventObj","idx","findIndex","cb","splice","listen","pathes","toUpperCase","parseEvent","emit","payload","emitForClient","setTimeout","beforeDrag","dragging","afterDrag","convToMouseEvent","te","touch","touches","type","changedTouches","clientX","clientY","layerX","layerY","offsetX","offsetY","pageX","pageY","screenX","screenY","clearTouchTimer","ctx","clearTimeout","touchTimer","handler","accept","originalEvent","sx","sy","dx","dy","ghost","once","preventDefault","cursor","clear","DndContext","passive","install","capture","getData","base","degree","scale","x","y","rad","Math","PI","cos","sin","pixelRatio","devicePixelRatio","viewport","node","foldingControl","NodeRect","offset","rect","dom","$bodyEl","top","right","bottom","left","cx","cy","icon","merge","other","min","max","draw","selection","config","ui","getHolderOffset","$viewport","padding","display","captureContext2D","canvasUI","$canvas","offsetWidth","offsetHeight","getContext","alpha","$ctx","registerElement","nodeUI","$el","uid","renderingContext","getNodeRenderer","model","getRenderer","placeHolder","elemOf","isRoot","append","parent","updateFolding","isFolded","subs","child","DEFAULT_EDGE_STYLE","color","findProp","nodeRef","getStyle","widthOf","$style","renderUnderline","drawPath","hor","ver","lineWidth","strokeStyle","rendering","LINE","srcNode","dstNode","s","NATURAL_CURVE","drawCurve","deg","ratio","props","MUSTACHE_LR","valign","valignOf","firstChild","srcWidth","dstWidth","abs","drawBeizeCurve","cpoints","renderCurve","MUSTACHE_TB","createEdges","edges","children","Edge","push","filterIndex","pos","index","updateHiddenState","edgeUI","edge","folded","filterEdges","hidden","matched","matchedDst","zIndex","NodeUI","sharedConfig","parentNode","selected","editing","nodeUi","parseSubs","folding","$dim","getCanvas","getNodeBody","view","layout","active","childNodes","dimension","w","h","b","level","assign","isSelected","setSelected","repaint","isDescendantOf","ref","updateModel","dir","setOffset","poff","setPos","getPos","update","isEditingState","setEditingState","isLeaf","find","predicate","addChild","childUI","prevParent","removeChild","moveNode","deletedNodes","lastChild","setFolding","drawNode","body","methodName","activeClassName","levelClassName","nodeLevelClassName","build","doLayout","setPosition","context","updated","layoutManager","getLayoutManager","reverseXPos","baseNode","reverseYPos","layoutMap","clearSelection","nodeMap","values","skipStateForInsert","nodes","appendNode","selectionModel","sibling","mindWired","addNode","siblingNode","notifySelection","getNodes","configuration","has","hideSelection","isEmpty","stopImmediatePropagation","nodesToDel","skipStateForDelete","deleteNodes","size","NodeEditing","close","isEditing","edit","editor","hideNodeEditor","len","id","random","toString","uuid","editingNode","parse","htmlTemplate","fitToCenter","position","transform","register","renderer","select","installEditor","$editorEl","showNodeEditor","query","endEditing","createRenderingContext","plainTextRenderer","bodyEl","$titleEl","render","lines","join","textArea","cmd","then","iconBadgeRenderer","$iconBadgeEl","innerText","startEditing","thumnailRenderer","$thumnailEl","$div","thumbnail","$inputEl","num","$imgEl","$textArea","url","visible","pathForm","captureSnapLines","hSnaps","vSnaps","dim","a","adj","points","reduce","minGapIndex","gaps","minIdx","gap","lineStyling","snap","dash","setLineDash","AligmentUI","turnOn","rootNode","snapEnabled","vLines","hLines","activeNodes","snaps","turnOff","doAlign","limit","delta","adjL","adjC","adjR","drawVLines","adjT","adjB","drawHLines","each","NO_OP","_","buildTree","dataSource","dataSet","parentSet","nodeConfigs","toNodeConfigs","childSetOf","childSet","DataSet","userDataList","parentType","relation","userData","clone","parentConfig","$ref","TreeDataSource","dataSets","rootType","dataType","dataList","virtual","dset","rootSet","capturePos","posMap","Capture","prev","horizontal","vertical","format","cur","DragContext","prepareDnd","eachCapture","getUpdatedNodes","exportTree","repaintTree","mwd","propagate","childNode","updateLevelClass","MindWired","installCanvasElem","dndContext","iconEl","newParentNode","findNodeAt","getSelectedNodes","moveNodes","getOffset","state","nodeId","findNode","timer","resizeObserver","ResizeObserver","observe","selectionArea","$holder","offsetLeft","offsetTop","getDimension","shiftBy","repaintNodeHolder","nodeBodies","querySelectorAll","nodeEl","slice","beginPath","moveTo","lineTo","stroke","lenSE","sqrt","cp1","geom","cp2","bezierCurveTo","xPoints","H","save","closePath","restore","yPoints","W","fillStyle","fillRect","baseOffset","drawSelection","rects","acc","editorElement","ok","editBox","regsiterNode","unregisterNode","unregisterElement","updateFoldingNodes","foldingEl","nodeRenderingContext","nodeSelectionModel","nodeEditor","alignmentUI","dragContext","rootUI","dragTargets","flatMap","acceleration","elems","reverse","MOVED","clearCanvas","$cachedStyle","nodeData","trigger","deleted","c","deletedChild","setLayout","layoutSpec","setEdge","edgeSpec","setScale","ebus","export","JSON","stringify","DEFAULT_UI_CONFIG","Configuration","enabled","relativeOffset","args","normalizeSnap","canvasEl","injectCanvas","autoInstallation","init","success","failure","configObj","cause","createDataSource"],"sourceRoot":""}